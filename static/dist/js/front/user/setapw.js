define(function(require,exports,module){this.validate=require("js/base/validate"),this.md5=require("js/base/utils/hrymd5"),module.exports={init:function(){clearPageTimer(),$("#submitBtn").on("click",function(){var s=$("#accountPassWord").val(),e=$("#reaccountPassWord").val(),a=$("#accountpwSmsCode").val();return s?validate.check_password(s)?e?s!=e?void layer.msg("两个密码不一致",{icon:2}):a?($("#submitBtn").attr("disabled","disabled"),void $.ajax({type:"post",url:_ctx+"/user/setapwsubmit",data:{accountPassWord:md5.md5(s),reaccountPassWord:md5.md5(e),accountpwSmsCode:a},cache:!1,dataType:"json",success:function(s){s?s.success?layer.msg("设置成功!",{icon:1,time:1e3},function(){window.location.href=_ctx+"/user/center"}):(layer.msg(s.msg,{icon:2}),$("#submitBtn").removeAttr("disabled")):(layer.msg("设置失败",{icon:2}),$("#submitBtn").removeAttr("disabled"))},error:function(s){}})):void layer.msg("短信验证码不能为空",{icon:2}):void layer.msg("确认密码不能为空",{icon:2}):void layer.msg("交易密码格式不正确",{icon:2}):void layer.msg("交易密码不能为空",{icon:2})})},sendsms:function(){$("#sendsmsBtn").on("click",function(){var s=$("#accountPassWord").val(),e=$("#reaccountPassWord").val();return s?validate.check_password(s)?e?s!=e?void layer.msg("两个密码不一致",{icon:2}):($(this).attr("disabled","disabled"),$(this).html("已发送"),void $.ajax({type:"post",url:_ctx+"/sms/getApwSmsCode",data:{accountPassWord:md5.md5(s),reaccountPassWord:md5.md5(e)},cache:!1,dataType:"json",success:function(s){if(s)if(s.success){layer.msg("发送成功",{icon:1});var e=120;window.clearInterval(pageTimer.setapw),pageTimer.setapw=window.setInterval(function(){e-=1,0==e?($("#sendsmsBtn").html("点击"),$("#sendsmsBtn").removeAttr("disabled"),$("#sms_message").html(""),window.clearInterval(registSmsCodeT1)):$("#sms_message").html(e+"秒后重新获取")},1e3)}else $("#sendsmsBtn").removeAttr("disabled"),layer.msg(s.msg,{icon:2});else $("#sendsmsBtn").removeAttr("disabled"),layer.msg("发送失败",{icon:2})},error:function(s){}})):void layer.msg("确认密码不能为空",{icon:2}):void layer.msg("交易密码格式不正确",{icon:2}):void layer.msg("交易密码不能为空",{icon:2})})}}});