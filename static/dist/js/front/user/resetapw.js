define(function(require,exports,module){this.validate=require("js/base/validate"),this.md5=require("js/base/utils/hrymd5"),module.exports={init:function(){clearPageTimer(),$("#submitBtn").on("click",function(){var s=$("#passWord").val(),e=$("#accountPassWord").val(),a=$("#reaccountPassWord").val(),o=$("#accountpwSmsCode").val();return s?e?validate.check_password(e)?a?e!=a?void layer.msg("两个密码不一致",{icon:2}):o?($("#submitBtn").attr("disabled","disabled"),void $.ajax({type:"post",url:_ctx+"/user/resetapwsubmit",data:{passWord:md5.md5(s),accountPassWord:md5.md5(e),reaccountPassWord:md5.md5(a),accountpwSmsCode:o},cache:!1,dataType:"json",success:function(s){s?s.success?layer.msg("重置成功!",{icon:1,time:1e3},function(){window.location.href=_ctx+"/user/center"}):(layer.msg(s.msg,{icon:2}),$("#submitBtn").removeAttr("disabled")):(layer.msg("重置失败",{icon:2}),$("#submitBtn").removeAttr("disabled"))},error:function(s){}})):void layer.msg("短信验证码不能为空",{icon:2}):void layer.msg("确认密码不能为空",{icon:2}):void layer.msg("新密码格式不正确",{icon:2}):void layer.msg("新密码不能为空",{icon:2}):void layer.msg("登录密码不能为空",{icon:2})})},sendsms:function(){$("#sendsmsBtn").on("click",function(){var s=$("#passWord").val(),e=$("#accountPassWord").val(),a=$("#reaccountPassWord").val();return s?e?validate.check_password(e)?a?e!=a?void layer.msg("两个密码不一致",{icon:2}):($(this).attr("disabled","disabled"),$(this).html("已发送"),void $.ajax({type:"post",url:_ctx+"/sms/getReApwSmsCode",data:{passWord:md5.md5(s),accountPassWord:md5.md5(e),reaccountPassWord:md5.md5(a)},cache:!1,dataType:"json",success:function(s){if(s)if(s.success){layer.msg("发送成功",{icon:1});var e=120;window.clearInterval(pageTimer.resetapw),pageTimer.resetapw=window.setInterval(function(){e-=1,0==e?($("#sendsmsBtn").html("点击"),$("#sendsmsBtn").removeAttr("disabled"),$("#sms_message").html(""),window.clearInterval(registSmsCodeT1)):$("#sms_message").html(e+"秒后重新获取")},1e3)}else $("#sendsmsBtn").removeAttr("disabled"),layer.msg(s.msg,{icon:2});else $("#sendsmsBtn").removeAttr("disabled"),layer.msg("发送失败",{icon:2})},error:function(s){}})):void layer.msg("确认密码不能为空",{icon:2}):void layer.msg("新密码格式不正确",{icon:2}):void layer.msg("新密码不能为空",{icon:2}):void layer.msg("登录密码不能为空",{icon:2})})}}});