define(function(require,exports,module){this.md5=require("js/base/utils/hrymd5"),module.exports={init:function(){$("#sendsmsBtn").on("click",function(){var e=$("#phoneNum").val();$(this).attr("disabled","disabled"),$.ajax({type:"post",url:_ctx+"/sms/forgetSmsCode",data:{phoneNum:e},cache:!1,dataType:"json",success:function(e){if(e)if(e.success){layer.msg("发送成功",{icon:1});var t=120;window.clearInterval(s);var s=window.setInterval(function(){t-=1,0==t?($("#sendsmsBtn").html("发送验证码"),$("#sendsmsBtn").removeAttr("disabled"),window.clearInterval(s)):$("#sendsmsBtn").html(t+"秒后重新发送")},1e3)}else $("#sendsmsBtn").removeAttr("disabled"),layer.msg(e.msg,{icon:2});else $("#sendsmsBtn").removeAttr("disabled"),layer.msg("发送失败",{icon:2})},error:function(e){}})}),$("#forgetPwdBtn").on("click",function(){var e=$("#forgetSmsCode").val(),t=$("#phoneNum").val();$("#form_forget1").ajaxSubmit({type:"post",url:_ctx+"/forgetpwd/firststep",dataType:"JSON",data:{code:e,phoneNum:t},success:function(e){e.success?window.location.href=_ctx+"/forgetpwd/forgetpwd/2":layer.msg(e.msg,{icon:2})}})}),$("#forgetPwdBtn2").on("click",function(){var e=$("#passwd").val(),t=$("#confirmpwd").val();if(""==e||void 0==e)return layer.msg("密码不允许为空",{icon:2}),!1;if(!/^[a-zA-Z][a-zA-Z0-9]{5,19}/.test(e))return layer.msg("密码格式不正确",{icon:2}),!1;if(e!=t)return layer.msg("两次输入密码不一致",{icon:2}),!1;var s=$("#tel").val();$("#form_forget2").ajaxSubmit({type:"post",url:_ctx+"/forgetpwd/secondstep",dataType:"JSON",data:{passwd:md5.md5(e),tel:s},success:function(e){e.success?window.location.href=_ctx+"/forgetpwd/forgetpwd/3":layer.msg(e.msg,{icon:2})}})})},setInterval:function(){var e=5;window.setInterval(function(){0==e&&(window.location.href=_ctx+"/login"),$("#time").text(e),e--},1e3)}}});