define(function(require,exports,module){var highcharts=require("lib/highcharts/highcharts"),exporting=require("lib/highcharts/exporting"),highchartszhcn=require("lib/highcharts/highcharts-zh_CN");require("lib/highcharts/color/hei"),module.exports={init:function(){var change7day_chart,change15day_chart,change30day_chart,change365day_chart,decisionChart;$("#change7day").on("click","a",function(){var a=$(this).attr("name");"curveChart"==a&&curveChart("七日数据统计",7),"columnChart"==a&&columnChart("七日数据统计",7)}),$("#change15day").on("click","a",function(){var a=$(this).attr("name");"curveChart"==a&&curveChart("15日数据统计",15),"columnChart"==a&&columnChart("15日数据统计",15)}),$("#change30day").on("click","a",function(){var a=$(this).attr("name");"curveChart"==a&&curveChart("月度数据统计",30),"columnChart"==a&&columnChart("月度数据统计",30)}),$("#change365day").on("click","a",function(){var a=$(this).attr("name");"curveChart"==a&&curveChart("年度数据统计",365),"columnChart"==a&&columnChart("年度数据统计",365)}),$("#changeCircle").on("click","a",function(){var a=$(this).attr("name");$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/circleChartData.do",dataType:"json",flag:a,success:function(a){var t;"today"==this.flag?(t=[["通过",a.t1],["建议通过",a.t2],["人工审核",a.t3],["审慎审核",a.t4],["拒绝",a.t5]],text="今日"):"all"==this.flag?(t=[["通过",a.a1],["建议通过",a.a2],["人工审核",a.a3],["审慎审核",a.a4],["拒绝",a.a5]],text="全部"):"month"==this.flag?(t=[["通过",a.m1],["建议通过",a.m2],["人工审核",a.m3],["审慎审核",a.m4],["拒绝",a.m5]],text="本月"):"year"==this.flag&&(t=[["通过",a.y1],["建议通过",a.y2],["人工审核",a.y3],["审慎审核",a.y4],["拒绝",a.y5]],text="本年"),decisionChart.update({credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:text+"决策分布图"},tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{type:"pie",name:"浏览器访问量占比",data:t}]})},error:function(a){}})});var load=function(){$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/count7day.do",cache:!1,dataType:"json",success:function(a){change7day_chart=new Highcharts.Chart("container",{credits:{enabled:!1},chart:{type:"area"},title:{text:"七日数据统计",x:-20},subtitle:{text:"数据来源: 互融云",x:-20},xAxis:{categories:a.date},yAxis:{title:{text:"数量(件)",rotation:0,align:"high"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"全部",data:a.data.allarr},{name:"通过",data:a.data.tongarr},{name:"建议通过",data:a.data.jiantongarr},{name:"人工审核",data:a.data.renarr},{name:"审慎审核",data:a.data.jianjuarr},{name:"拒绝",data:a.data.juarr}]})},error:function(a){}}),$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/count15day.do",cache:!1,dataType:"json",success:function(a){change15day_chart=new Highcharts.Chart("container15",{credits:{enabled:!1},chart:{type:"area"},title:{text:"15日数据统计",x:-20},subtitle:{text:"数据来源: 互融云",x:-20},xAxis:{categories:a.date},yAxis:{title:{text:"数量(件)",rotation:0,align:"high"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"全部",data:a.data.allarr},{name:"通过",data:a.data.tongarr},{name:"建议通过",data:a.data.jiantongarr},{name:"人工审核",data:a.data.renarr},{name:"审慎审核",data:a.data.jianjuarr},{name:"拒绝",data:a.data.juarr}]})},error:function(a){}}),$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/count30day.do",cache:!1,dataType:"json",success:function(a){change30day_chart=new Highcharts.Chart("container30",{credits:{enabled:!1},chart:{type:"area"},title:{text:"月度数据统计",x:-20},subtitle:{text:"数据来源: 互融云",x:-20},xAxis:{categories:a.date},yAxis:{title:{text:"数量(件)",rotation:0,align:"high"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"全部",data:a.data.allarr},{name:"通过",data:a.data.tongarr},{name:"建议通过",data:a.data.jiantongarr},{name:"人工审核",data:a.data.renarr},{name:"审慎审核",data:a.data.jianjuarr},{name:"拒绝",data:a.data.juarr}]})},error:function(a){}}),$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/count365day.do",cache:!1,dataType:"json",success:function(a){change365day_chart=new Highcharts.Chart("container365",{credits:{enabled:!1},chart:{type:"area"},title:{text:"年度数据统计",x:-20},subtitle:{text:"数据来源: 互融云",x:-20},xAxis:{categories:a.date},yAxis:{title:{text:"数量(件)",rotation:0,align:"high"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"全部",data:a.data.allarr},{name:"通过",data:a.data.tongarr},{name:"建议通过",data:a.data.jiantongarr},{name:"人工审核",data:a.data.renarr},{name:"审慎审核",data:a.data.jianjuarr},{name:"拒绝",data:a.data.juarr}]})},error:function(a){}})};load();var curveChart=function(name,type){$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/count"+type+"day.do",cache:!1,dataType:"json",success:function(data){eval("change"+type+"day_chart").update({credits:{enabled:!1},chart:{type:"area"},title:{text:name,x:-20},subtitle:{text:"数据来源: 互融云",x:-20},xAxis:{categories:data.date},yAxis:{title:{text:"数量(件)",rotation:0,align:"high"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"全部",data:data.data.allarr},{name:"通过",data:data.data.tongarr},{name:"建议通过",data:data.data.jiantongarr},{name:"人工审核",data:data.data.renarr},{name:"审慎审核",data:data.data.jianjuarr},{name:"拒绝",data:data.data.juarr}]})},error:function(a){}})},columnChart=function(name,type){$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/count"+type+"day.do",cache:!1,dataType:"json",success:function(data){eval("change"+type+"day_chart").update({credits:{enabled:!1},chart:{type:"column"},title:{text:name},subtitle:{text:"数据来源: 互融云"},xAxis:{categories:data.date,crosshair:!0},yAxis:{min:0,title:{text:"数量"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"全部",data:data.data.allarr},{name:"通过",data:data.data.tongarr},{name:"建议通过",data:data.data.jiantongarr},{name:"人工审核",data:data.data.renarr},{name:"审慎审核",data:data.data.jianjuarr},{name:"拒绝",data:data.data.juarr}]}),change7day_chart.redraw()},error:function(a){}})},circleChart=function(){$.ajax({type:"get",url:_ctx+"/admin/process/proprocess/circleChartData.do",dataType:"json",flag:"today",success:function(a){var t;"today"==this.flag&&(t=[["通过",a.t1],["建议通过",a.t2],["人工审核",a.t3],["审慎审核",a.t4],["拒绝",a.t5]]),decisionChart=new Highcharts.Chart("circleChart",{credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"今日决策分布图"},tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{type:"pie",name:"浏览器访问量占比",data:t}]})},error:function(a){}})};circleChart()}}});