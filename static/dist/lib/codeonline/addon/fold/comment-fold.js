define(function(require,exports,module){require("lib/codeonline/lib/codemirror.js"),CodeMirror.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,r){var o=e.getModeAt(r),t=o.blockCommentStart,n=o.blockCommentEnd;if(t&&n){for(var i,l=r.line,f=e.getLine(l),m=r.ch,a=0;;){var c=m<=0?-1:f.lastIndexOf(t,m-1);if(-1!=c){if(1==a&&c<r.ch)return;if(/comment/.test(e.getTokenTypeAt(CodeMirror.Pos(l,c+1)))&&(0==c||f.slice(c-n.length,c)==n||!/comment/.test(e.getTokenTypeAt(CodeMirror.Pos(l,c))))){i=c+t.length;break}m=c-1}else{if(1==a)return;a=1,m=f.length}}var d,s,g=1,b=e.lastLine();e:for(var h=l;h<=b;++h)for(var k=e.getLine(h),C=h==l?i:0;;){var u=k.indexOf(t,C),v=k.indexOf(n,C);if(u<0&&(u=k.length),v<0&&(v=k.length),(C=Math.min(u,v))==k.length)break;if(C==u)++g;else if(!--g){d=h,s=C;break e}++C}if(null!=d&&(l!=d||s!=i))return{from:CodeMirror.Pos(l,i),to:CodeMirror.Pos(d,s)}}})});