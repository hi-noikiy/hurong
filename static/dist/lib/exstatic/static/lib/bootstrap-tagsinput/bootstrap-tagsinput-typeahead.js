!function($){var t={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(t){return void 0===t},bind:$.proxy,each:function(t,e){function n(t,n){return e(n,t)}$.each(t,n)},map:$.map,filter:$.grep,every:function(t,e){var n=!0;return t?($.each(t,function(i,r){if(!(n=e.call(null,r,i,t)))return!1}),!!n):n},some:function(t,e){var n=!1;return t?($.each(t,function(i,r){if(n=e.call(null,r,i,t))return!1}),!!n):n},mixin:$.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(t){function e(){return String(t)}return $.isFunction(t)?t:e},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,o,u=this,a=arguments;return s=function(){i=null,n||(r=t.apply(u,a))},o=n&&!i,clearTimeout(i),i=setTimeout(s,e),o&&(r=t.apply(u,a)),r}},throttle:function(t,e){var n,i,r,s,o,u;return o=0,u=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var a=new Date,h=e-(a-o);return n=this,i=arguments,h<=0?(clearTimeout(r),r=null,o=a,s=t.apply(n,i)):r||(r=setTimeout(u,h)),s}},noop:function(){}},e="0.10.2",n=function(t){function e(t){return t.split(/\s+/)}function n(t){return t.split(/\W+/)}function i(t){return function(e){return function(n){return t(n[e])}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),i=function(){function e(t){this.maxSize=t||100,this.size=0,this.hash={},this.list=new n}function n(){this.head=this.tail=null}function i(t,e){this.key=t,this.val=e,this.prev=this.next=null}return t.mixin(e.prototype,{set:function(t,e){var n,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new i(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val}}),t.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),e}(),r=function(){function e(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function r(t){return JSON.parse(t)}var s,o;try{s=window.localStorage,s.setItem("~~~","!"),s.removeItem("~~~")}catch(t){s=null}return o=s&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),r(s.getItem(this._prefix(t)))},set:function(e,r,o){return t.isNumber(o)?s.setItem(this._ttlKey(e),i(n()+o)):s.removeItem(this._ttlKey(e)),s.setItem(this._prefix(e),i(r))},remove:function(t){return s.removeItem(this._ttlKey(t)),s.removeItem(this._prefix(t)),this},clear:function(){var t,e,n=[],i=s.length;for(t=0;t<i;t++)(e=s.key(t)).match(this.keyMatcher)&&n.push(e.replace(this.keyMatcher,""));for(t=n.length;t--;)this.remove(n[t]);return this},isExpired:function(e){var i=r(s.getItem(this._ttlKey(e)));return!!(t.isNumber(i)&&n()>i)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,o),e}(),s=function(){function e(t){t=t||{},this._send=t.transport?n(t.transport):$.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get}function n(e){return function(n,i){function r(e){t.defer(function(){o.resolve(e)})}function s(e){t.defer(function(){o.reject(e)})}var o=$.Deferred();return e(n,i,r,s),o}}var r=0,s={},o=6,u=new i(10);return e.setMaxPendingRequests=function(t){o=t},e.resetCache=function(){u=new i(10)},t.mixin(e.prototype,{_get:function(t,e,n){function i(e){n&&n(null,e),u.set(t,e)}function a(){n&&n(!0)}function h(){r--,delete s[t],l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var c,l=this;(c=s[t])?c.done(i).fail(a):r<o?(r++,s[t]=this._send(t,e).done(i).fail(a).always(h)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(e,n,i){var r;return t.isFunction(n)&&(i=n,n={}),(r=u.get(e))?t.defer(function(){i&&i(null,r)}):this._get(e,n,i),!!r}}),e}(),o=function(){function e(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||$.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function n(e){return e=t.filter(e,function(t){return!!t}),e=t.map(e,function(t){return t.toLowerCase()})}function i(){return{ids:[],children:{}}}function r(t){for(var e={},n=[],i=0;i<t.length;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function s(t,e){function n(t,e){return t-e}var i=0,r=0,s=[];for(t=t.sort(n),e=e.sort(n);i<t.length&&r<e.length;)t[i]<e[r]?i++:t[i]>e[r]?r++:(s.push(t[i]),i++,r++);return s}return t.mixin(e.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(e){var r=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var s,o;s=r.datums.push(e)-1,o=n(r.datumTokenizer(e)),t.each(o,function(t){var e,n,o;for(e=r.trie,n=t.split("");o=n.shift();)e=e.children[o]||(e.children[o]=i()),e.ids.push(s)})})},get:function(e){var i,o,u=this;return i=n(this.queryTokenizer(e)),t.each(i,function(t){var e,n,i,r;if(o&&0===o.length)return!1;for(e=u.trie,n=t.split("");e&&(i=n.shift());)e=e.children[i];if(!e||0!==n.length)return o=[],!1;r=e.ids.slice(0),o=o?s(o,r):r}),o?t.map(r(o),function(t){return u.datums[t]}):[]},reset:function(){this.datums=[],this.trie=i()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),e}(),u=function(){function n(t){return t.local||null}function i(n){var i,r;return r={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(i=n.prefetch||null)&&(i=t.isString(i)?{url:i}:i,i=t.mixin(r,i),i.thumbprint=e+i.thumbprint,i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",!i.url&&$.error("prefetch requires url to be set")),i}function r(e){var n,i;return i={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(n=e.remote||null)&&(n=t.isString(n)?{url:n}:n,n=t.mixin(i,n),n.rateLimiter=/^throttle$/i.test(n.rateLimitBy)?function(e){return function(n){return t.throttle(n,e)}}(n.rateLimitWait):function(e){return function(n){return t.debounce(n,e)}}(n.rateLimitWait),n.ajax.type=n.ajax.type||"GET",n.ajax.dataType=n.ajax.dataType||"json",delete n.rateLimitBy,delete n.rateLimitWait,!n.url&&$.error("remote requires url to be set")),n}return{local:n,prefetch:i,remote:r}}();!function(e){function i(t){t&&(t.local||t.prefetch||t.remote)||$.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=a(t.sorter),this.dupDetector=t.dupDetector||h,this.local=u.local(t),this.prefetch=u.prefetch(t),this.remote=u.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new o({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new r(this.cacheKey):null}function a(e){function n(t){return t.sort(e)}function i(t){return t}return t.isFunction(e)?n:i}function h(){return!1}var c,l;c=e.Bloodhound,l={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.Bloodhound=i,i.noConflict=function(){return e.Bloodhound=c,i},i.tokenizers=n,t.mixin(i.prototype,{_loadPrefetch:function(t){function e(e){r.clear(),r.add(t.filter?t.filter(e):e),r._saveToStorage(r.index.serialize(),t.thumbprint,t.ttl)}var n,i,r=this;return(n=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(n),i=$.Deferred().resolve()):i=$.ajax(t.url,t.ajax).done(e),i},_getFromRemote:function(t,e){function n(t,n){e(t?[]:s.remote.filter?s.remote.filter(n):n)}var i,r,s=this;return t=t||"",r=encodeURIComponent(t),i=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(i,this.remote.ajax,n)},_saveToStorage:function(t,e,n){this.storage&&(this.storage.set(l.data,t,n),this.storage.set(l.protocol,location.protocol,n),this.storage.set(l.thumbprint,e,n))},_readFromStorage:function(t){var e,n={};return this.storage&&(n.data=this.storage.get(l.data),n.protocol=this.storage.get(l.protocol),n.thumbprint=this.storage.get(l.thumbprint)),e=n.thumbprint!==t||n.protocol!==location.protocol,n.data&&!e?n.data:null},_initialize:function(){function e(){i.add(t.isFunction(r)?r():r)}var n,i=this,r=this.local;return n=this.prefetch?this._loadPrefetch(this.prefetch):$.Deferred().resolve(),r&&n.done(e),this.transport=this.remote?new s(this.remote):null,this.initPromise=n.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(e,n){function i(e){var i=s.slice(0);t.each(e,function(e){var n;return n=t.some(i,function(t){return r.dupDetector(e,t)}),!n&&i.push(e),i.length<r.limit}),n&&n(r.sorter(i))}var r=this,s=[],o=!1;s=this.index.get(e),s=this.sorter(s).slice(0,this.limit),s.length<this.limit&&this.transport&&(o=this._getFromRemote(e,i)),o||(s.length>0||!this.transport)&&n&&n(s)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&s.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}})}(this);var a={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},h={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};t.isMsie()&&t.mixin(h.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(h.input,{marginTop:"-1px"});var c=function(){function e(t){t&&t.el||$.error("EventBus initialized without el"),this.$el=$(t.el)}return t.mixin(e.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+t,e)}}),e}(),l=function(){function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(u),n=i?o(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,o;if(!this._callbacks)return this;for(t=t.split(u),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),o=s(n.async,this,[e].concat(i)),r()&&a(o);return this}function s(t,e,n){function i(){for(var i,r=0;!i&&r<t.length;r+=1)i=!1===t[r].apply(e,n);return!i}return i}function o(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,a=function(){return window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}();return{onSync:n,onAsync:e,off:i,trigger:r}}(),d=function(e){function n(e,n,i){for(var r,s=[],o=0;o<e.length;o++)s.push(t.escapeRegExChars(e[o]));return r=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function s(t){var n,i;return(n=u.exec(t.data))&&(wrapperNode=e.createElement(r.tagName),r.className&&(wrapperNode.className=r.className),i=t.splitText(n.index),i.splitText(n[0].length),wrapperNode.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(wrapperNode,i)),!!n}function o(t,e){for(var n,i=0;i<t.childNodes.length;i++)n=t.childNodes[i],3===n.nodeType?i+=e(n)?1:0:o(n,e)}var u;r=t.mixin({},i,r),r.node&&r.pattern&&(r.pattern=t.isArray(r.pattern)?r.pattern:[r.pattern],u=n(r.pattern,r.caseSensitive,r.wordsOnly),o(r.node,s))}}(window.document),p=function(){function e(e){var i,r,o,u,a=this;e=e||{},e.input||$.error("input is missing"),i=t.bind(this._onBlur,this),r=t.bind(this._onFocus,this),o=t.bind(this._onKeydown,this),u=t.bind(this._onInput,this),this.$hint=$(e.hint),this.$input=$(e.input).on("blur.tt",i).on("focus.tt",r).on("keydown.tt",o),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){s[e.which||e.keyCode]||t.defer(t.bind(a._onInput,a,e))}):this.$input.on("input.tt",u),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(t){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function i(t,n){return e.normalizeQuery(t)===e.normalizeQuery(n)}function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},e.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(e.prototype,l,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var n,i,s;switch(t){case"tab":i=this.getHint(),s=this.getInputValue(),n=i&&i!==s&&!r(e);break;case"up":case"down":n=!r(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!r(e);break;default:n=!0}return n},_checkInputValue:function(){var t,e,n;t=this.getInputValue(),e=i(t,this.query),n=!!e&&this.query.length!==t.length,e?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=t)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),!(i=""!==t&&n&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),e}(),f=function(){function e(e){e=e||{},e.templates=e.templates||{},e.source||$.error("missing source"),e.name&&!r(e.name)&&$.error("invalid dataset name: "+e.name),this.query=null,this.highlight=!!e.highlight,this.name=e.name||t.getUniqueId(),this.source=e.source,this.displayFn=n(e.display||e.displayKey),this.templates=i(e.templates,this.displayFn),this.$el=$(a.dataset.replace("%CLASS%",this.name))}function n(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function i(e,n){function i(t){return"<p>"+n(t)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function r(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var s="ttDataset",o="ttValue",u="ttDatum";return e.extractDatasetName=function(t){return $(t).data(s)},e.extractValue=function(t){return $(t).data(o)},e.extractDatum=function(t){return $(t).data(u)},t.mixin(e.prototype,l,{_render:function(e,n){function i(){return l.templates.header({query:e,isEmpty:!c})}function r(){return l.templates.footer({query:e,isEmpty:!c})}if(this.$el){var c,l=this;this.$el.empty(),c=n&&n.length,!c&&this.templates.empty?this.$el.html(function(){return l.templates.empty({query:e,isEmpty:!0})}()).prepend(l.templates.header?i():null).append(l.templates.footer?r():null):c&&this.$el.html(function(){function i(t){var e;return e=$(a.suggestion).append(l.templates.suggestion(t)).data(s,l.name).data(o,l.displayFn(t)).data(u,t),e.children().each(function(){$(this).css(h.suggestionChild)}),e}var r,c;return r=$(a.suggestions).css(h.suggestions),c=t.map(n,i),r.append.apply(r,c),l.highlight&&d({node:r[0],pattern:e}),r}()).prepend(l.templates.header?i():null).append(l.templates.footer?r():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){n.canceled||t!==n.query||n._render(t,e)}var n=this;this.query=t,this.canceled=!1,this.source(t,e)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),e}(),g=function(){function e(e){var i,r,s,o=this;e=e||{},e.menu||$.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(e.datasets,n),i=t.bind(this._onSuggestionClick,this),r=t.bind(this._onSuggestionMouseEnter,this),s=t.bind(this._onSuggestionMouseLeave,this),this.$menu=$(e.menu).on("click.tt",".tt-suggestion",i).on("mouseenter.tt",".tt-suggestion",r).on("mouseleave.tt",".tt-suggestion",s),t.each(this.datasets,function(t){o.$menu.append(t.getRoot()),t.onSync("rendered",o._onRendered,o)})}function n(t){return new f(t)}return t.mixin(e.prototype,l,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",$(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor($(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(t){return t.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,n,i,r;if(this.isOpen){if(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),i=e.index(n)+t,-1===(i=(i+1)%(e.length+1)-1))return void this.trigger("cursorRemoved");i<-1&&(i=e.length-1),this._setCursor(r=e.eq(i)),this._ensureVisible(r)}},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),e<0?this.$menu.scrollTop(i+e):r<n&&this.$menu.scrollTop(i+(n-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?h.ltr:h.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:f.extractDatum(t),value:f.extractValue(t),datasetName:f.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(t){t.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),e}(),m=function(){function e(e){var i,r,s;e=e||{},e.input||$.error("missing input"),this.isActivated=!1,this.autoselect=!!e.autoselect,this.minLength=t.isNumber(e.minLength)?e.minLength:1,this.$node=n(e.input,e.withHint),i=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-input"),s=this.$node.find(".tt-hint"),r.on("blur.tt",function(e){var n,s,o;n=document.activeElement,s=i.is(n),o=i.has(n).length>0,t.isMsie()&&(s||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){r.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=e.eventBus||new c({el:r}),this.dropdown=new g({menu:i,datasets:e.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new p({input:r,hint:s}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function n(t,e){var n,r,o,u;n=$(t),r=$(a.wrapper).css(h.wrapper),o=$(a.dropdown).css(h.dropdown),u=n.clone().css(h.hint).css(i(n)),u.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),n.data(s,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(e?h.input:h.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(t){}return n.wrap(r).parent().prepend(e?u:null).append(o)}function i(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function r(e){var n=e.find(".tt-input");t.each(n.data(s),function(e,i){t.isUndefined(e)?n.removeAttr(i):n.attr(i,e)}),n.detach().removeData(s).removeClass("tt-input").insertAfter(e),e.remove()}var s="ttAttrs";return t.mixin(e.prototype,{_onSuggestionClicked:function(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function(t,e){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var e,n,i,r,s,o;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=p.normalizeQuery(n),r=t.escapeRegExChars(i),s=new RegExp("^(?:"+r+")(.+$)","i"),o=s.exec(e.value),o?this.input.setHint(n+o[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,n,i,r;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&(r=this.dropdown.getDatumForTopSuggestion(),r&&this.input.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.raw,r.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),r(this.$node),this.$node=null}}),e}();!function(){var e,n,i;e=$.fn.typeahead,n="ttTypeahead",i={initialize:function(e,i){function r(){var r,s=$(this);t.each(i,function(t){t.highlight=!!e.highlight}),r=new m({input:s,eventBus:new c({el:s}),withHint:!!t.isUndefined(e.hint)||!!e.hint,minLength:e.minLength,autoselect:e.autoselect,datasets:i}),s.data(n,r)}return i=t.isArray(i)?i:[].slice.call(arguments,1),e=e||{},this.each(r)},open:function(){function t(){var t,e=$(this);(t=e.data(n))&&t.open()}return this.each(t)},close:function(){function t(){var t,e=$(this);(t=e.data(n))&&t.close()}return this.each(t)},val:function(t){function e(){var e,i=$(this);(e=i.data(n))&&e.setVal(t)}return arguments.length?this.each(e):function(t){var e,i;return(e=t.data(n))&&(i=e.getVal()),i}(this.first())},destroy:function(){function t(){var t,e=$(this);(t=e.data(n))&&(t.destroy(),e.removeData(n))}return this.each(t)}},$.fn.typeahead=function(t){return i[t]?i[t].apply(this,[].slice.call(arguments,1)):i.initialize.apply(this,arguments)},$.fn.typeahead.noConflict=function(){return $.fn.typeahead=e,this}}()}(window.jQuery);