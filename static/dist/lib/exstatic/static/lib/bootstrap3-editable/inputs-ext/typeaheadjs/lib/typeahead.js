!function($){var t={isMsie:function(){var t=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return!!t&&parseInt(t[2],10)},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(t){return void 0===t},bind:$.proxy,bindAll:function(t){var e;for(var i in t)$.isFunction(e=t[i])&&(t[i]=$.proxy(e,t))},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},each:$.each,map:$.map,filter:$.grep,every:function(t,e){var i=!0;return t?($.each(t,function(n,s){if(!(i=e.call(null,s,n,t)))return!1}),!!i):i},some:function(t,e){var i=!1;return t?($.each(t,function(n,s){if(i=e.call(null,s,n,t))return!1}),!!i):i},mixin:$.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var r,o,u=this,a=arguments;return r=function(){n=null,i||(s=t.apply(u,a))},o=i&&!n,clearTimeout(n),n=setTimeout(r,e),o&&(s=t.apply(u,a)),s}},throttle:function(t,e){var i,n,s,r,o,u;return o=0,u=function(){o=new Date,s=null,r=t.apply(i,n)},function(){var a=new Date,c=e-(a-o);return i=this,n=arguments,c<=0?(clearTimeout(s),s=null,o=a,r=t.apply(i,n)):s||(s=setTimeout(u,c)),r}},tokenizeQuery:function(t){return $.trim(t).toLowerCase().split(/[\s]+/)},tokenizeText:function(t){return $.trim(t).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},e=function(){return{on:function(t,e){var i;if(!e)return this;for(this._callbacks=this._callbacks||{},t=t.split(/\s+/);i=t.shift();)this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push(e);return this},trigger:function(t,e){var i,n;if(!this._callbacks)return this;for(t=t.split(/\s+/);i=t.shift();)if(n=this._callbacks[i])for(var s=0;s<n.length;s+=1)n[s].call(this,{type:i,data:e});return this}}}(),i=function(){function e(t){t&&t.el||$.error("EventBus initialized without el"),this.$el=$(t.el)}return t.mixin(e.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+t,e)}}),e}(),n=function(){function e(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function i(){return(new Date).getTime()}function n(e){return JSON.stringify(t.isUndefined(e)?null:e)}function s(t){return JSON.parse(t)}var r,o;try{r=window.localStorage,r.setItem("~~~","!"),r.removeItem("~~~")}catch(t){r=null}return o=r&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),s(r.getItem(this._prefix(t)))},set:function(e,s,o){return t.isNumber(o)?r.setItem(this._ttlKey(e),n(i()+o)):r.removeItem(this._ttlKey(e)),r.setItem(this._prefix(e),n(s))},remove:function(t){return r.removeItem(this._ttlKey(t)),r.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=r.length;for(t=0;t<n;t++)(e=r.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(e){var n=s(r.getItem(this._ttlKey(e)));return!!(t.isNumber(n)&&i()>n)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,o),e}(),s=function(){function e(e){t.bindAll(this),e=e||{},this.sizeLimit=e.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return t.mixin(e.prototype,{get:function(t){return this.cache[t]},set:function(t,e){var i;this.cachedKeysByAge.length===this.sizeLimit&&(i=this.cachedKeysByAge.shift(),delete this.cache[i]),this.cache[t]=e,this.cachedKeysByAge.push(t)}}),e}(),r=function(){function e(e){t.bindAll(this),e=t.isString(e)?{url:e}:e,u=u||new s,o=t.isNumber(e.maxParallelRequests)?e.maxParallelRequests:o||6,this.url=e.url,this.wildcard=e.wildcard||"%QUERY",this.filter=e.filter,this.replace=e.replace,this.ajaxSettings={type:"get",cache:e.cache,timeout:e.timeout,dataType:e.dataType||"json",beforeSend:e.beforeSend},this._get=(/^throttle$/i.test(e.rateLimitFn)?t.throttle:t.debounce)(this._get,e.rateLimitWait||300)}function i(){a++}function n(){a--}function r(){return a<o}var o,u,a=0,c={};return t.mixin(e.prototype,{_get:function(t,e){function i(i){var s=n.filter?n.filter(i):i;e&&e(s),u.set(t,i)}var n=this;r()?this._sendRequest(t).done(i):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(t){function e(){n(),c[t]=null,s.onDeckRequestArgs&&(s._get.apply(s,s.onDeckRequestArgs),s.onDeckRequestArgs=null)}var s=this,r=c[t];return r||(i(),r=c[t]=$.ajax(t,this.ajaxSettings).always(e)),r},get:function(e,i){var n,s,r=this,o=encodeURIComponent(e||"");return i=i||t.noop,n=this.replace?this.replace(this.url,o):this.url.replace(this.wildcard,o),(s=u.get(n))?t.defer(function(){i(r.filter?r.filter(s):s)}):this._get(n,i),!!s}}),e}(),o=function(){function e(e){t.bindAll(this),t.isString(e.template)&&!e.engine&&$.error("no template engine specified"),e.local||e.prefetch||e.remote||$.error("one of local, prefetch, or remote is required"),this.name=e.name||t.getUniqueId(),this.limit=e.limit||5,this.minLength=e.minLength||1,this.header=e.header,this.footer=e.footer,this.valueKey=e.valueKey||"value",this.template=i(e.template,e.engine,this.valueKey),this.local=e.local,this.prefetch=e.prefetch,this.remote=e.remote,this.itemHash={},this.adjacencyList={},this.storage=e.name?new n(e.name):null}function i(e,i,n){var s,r;return t.isFunction(e)?s=e:t.isString(e)?(r=i.compile(e),s=t.bind(r.render,r)):s=function(t){return"<p>"+t[n]+"</p>"},s}var s={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return t.mixin(e.prototype,{_processLocalData:function(t){this._mergeProcessedData(this._processData(t))},_loadPrefetchData:function(e){function i(i){var n=e.filter?e.filter(i):i,r=h._processData(n),o=r.itemHash,u=r.adjacencyList;h.storage&&(h.storage.set(s.itemHash,o,e.ttl),h.storage.set(s.adjacencyList,u,e.ttl),h.storage.set(s.thumbprint,l,e.ttl),h.storage.set(s.protocol,t.getProtocol(),e.ttl)),h._mergeProcessedData(r)}var n,r,o,u,a,c,h=this,l="0.9.3"+(e.thumbprint||"");return this.storage&&(n=this.storage.get(s.thumbprint),r=this.storage.get(s.protocol),o=this.storage.get(s.itemHash),u=this.storage.get(s.adjacencyList)),a=n!==l||r!==t.getProtocol(),e=t.isString(e)?{url:e}:e,e.ttl=t.isNumber(e.ttl)?e.ttl:864e5,o&&u&&!a?(this._mergeProcessedData({itemHash:o,adjacencyList:u}),c=$.Deferred().resolve()):c=$.getJSON(e.url).done(i),c},_transformDatum:function(e){var i=t.isString(e)?e:e[this.valueKey],n=e.tokens||t.tokenizeText(i),s={value:i,tokens:n};return t.isString(e)?(s.datum={},s.datum[this.valueKey]=e):s.datum=e,s.tokens=t.filter(s.tokens,function(e){return!t.isBlankString(e)}),s.tokens=t.map(s.tokens,function(t){return t.toLowerCase()}),s},_processData:function(e){var i=this,n={},s={};return t.each(e,function(e,r){var o=i._transformDatum(r),u=t.getUniqueId(o.value);n[u]=o,t.each(o.tokens,function(e,i){var n=i.charAt(0),r=s[n]||(s[n]=[u]);!~t.indexOf(r,u)&&r.push(u)})}),{itemHash:n,adjacencyList:s}},_mergeProcessedData:function(e){var i=this;t.mixin(this.itemHash,e.itemHash),t.each(e.adjacencyList,function(t,e){var n=i.adjacencyList[t];i.adjacencyList[t]=n?n.concat(e):e})},_getLocalSuggestions:function(e){var i,n=this,s=[],r=[],o=[];return t.each(e,function(e,i){var n=i.charAt(0);!~t.indexOf(s,n)&&s.push(n)}),t.each(s,function(t,e){var s=n.adjacencyList[e];if(!s)return!1;r.push(s),(!i||s.length<i.length)&&(i=s)}),r.length<s.length?[]:(t.each(i,function(i,s){var u,a,c=n.itemHash[s];u=t.every(r,function(e){return~t.indexOf(e,s)}),(a=u&&t.every(e,function(e){return t.some(c.tokens,function(t){return 0===t.indexOf(e)})}))&&o.push(c)}),o)},initialize:function(){var t;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new r(this.remote):null,t=this.prefetch?this._loadPrefetchData(this.prefetch):$.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return t},t},getSuggestions:function(e,i){function n(e){r=r.slice(0),t.each(e,function(e,i){var n,s=o._transformDatum(i);return n=t.some(r,function(t){return s.value===t.value}),!n&&r.push(s),r.length<o.limit}),i&&i(r)}var s,r,o=this,u=!1;e.length<this.minLength||(s=t.tokenizeQuery(e),r=this._getLocalSuggestions(s).slice(0,this.limit),r.length<this.limit&&this.transport&&(u=this.transport.get(e,n)),!u&&i&&i(r))}}),e}(),u=function(){function i(e){var i=this;t.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=$(e.hint),this.$input=$(e.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){i.specialKeyCodeMap[e.which||e.keyCode]||t.defer(i._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(t){return $("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(t,e){return t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t===e}return t.mixin(i.prototype,e,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(t){var e=this.specialKeyCodeMap[t.which||t.keyCode];e&&this.trigger(e+"Keyed",t)},_compareQueryToInputValue:function(){var t=this.getInputValue(),e=s(this.query,t);!e||this.query.length===t.length?e||this.trigger("queryChanged",{value:this.query=t}):this.trigger("whitespaceChanged",{value:this.query})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),!e&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var e,i=this.$input.val().length,n=this.$input[0].selectionStart;return t.isNumber(n)?n===i:!document.selection||(e=document.selection.createRange(),e.moveStart("character",-i),i===e.text.length)}}),i}(),a=function(){function i(e){t.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=$(e.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function n(t){return t.data("suggestion")}var s={suggestionsList:'<span class="tt-suggestions"></span>'},r={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return t.mixin(i.prototype,e,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(t){var e=$(t.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),e.addClass("tt-is-under-cursor")},_handleSelection:function(t){var e=$(t.currentTarget);this.trigger("suggestionSelected",n(e))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var e,i,s,r;if(this.isVisible()){if(e=this._getSuggestions(),i=e.filter(".tt-is-under-cursor"),i.removeClass("tt-is-under-cursor"),s=e.index(i)+t,-1===(s=(s+1)%(e.length+1)-1))return void this.trigger("cursorRemoved");s<-1&&(s=e.length-1),r=e.eq(s).addClass("tt-is-under-cursor"),this._ensureVisibility(r),this.trigger("cursorMoved",n(r))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(t){var e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),i=this.$menu.scrollTop(),n=t.position().top,s=n+t.outerHeight(!0);n<0?this.$menu.scrollTop(i+n):e<s&&this.$menu.scrollTop(i+(s-e))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){var e={left:"0",right:"auto"},i={left:"auto",right:" 0"};"ltr"===t?this.$menu.css(e):this.$menu.css(i)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var t=this._getSuggestions().filter(".tt-is-under-cursor").first();return t.length>0?n(t):null},getFirstSuggestion:function(){var t=this._getSuggestions().first();return t.length>0?n(t):null},renderSuggestions:function(e,i){var n,o,u,a,c,h="tt-dataset-"+e.name,l='<div class="tt-suggestion">%body</div>',d=this.$menu.find("."+h);0===d.length&&(o=$(s.suggestionsList).css(r.suggestionsList),d=$("<div></div>").addClass(h).append(e.header).append(o).append(e.footer).appendTo(this.$menu)),i.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),u=document.createElement("div"),a=document.createDocumentFragment(),t.each(i,function(t,i){i.dataset=e.name,n=e.template(i.datum),u.innerHTML=l.replace("%body",n),c=$(u.firstChild).css(r.suggestion).data("suggestion",i),c.children().each(function(){$(this).css(r.suggestionChild)}),a.appendChild(c[0])}),d.show().find(".tt-suggestions").html(a)):this.clearSuggestions(e.name),this.trigger("suggestionsRendered")},clearSuggestions:function(t){var e=t?this.$menu.find(".tt-dataset-"+t):this.$menu.find('[class^="tt-dataset-"]'),i=e.find(".tt-suggestions");e.hide(),i.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),i}(),c=function(){function i(e){var i,s,r;t.bindAll(this),this.$node=n(e.input),this.datasets=e.datasets,this.dir=null,this.eventBus=e.eventBus,i=this.$node.find(".tt-dropdown-menu"),s=this.$node.find(".tt-query"),r=this.$node.find(".tt-hint"),this.dropdownView=new a({menu:i}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new u({input:s,hint:r}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function n(t){var e=$(r.wrapper),i=$(r.dropdown),n=$(t),s=$(r.hint);e=e.css(o.wrapper),i=i.css(o.dropdown),s.css(o.hint).css({backgroundAttachment:n.css("background-attachment"),backgroundClip:n.css("background-clip"),backgroundColor:n.css("background-color"),backgroundImage:n.css("background-image"),backgroundOrigin:n.css("background-origin"),backgroundPosition:n.css("background-position"),backgroundRepeat:n.css("background-repeat"),backgroundSize:n.css("background-size")}),n.data("ttAttrs",{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(o.query);try{!n.attr("dir")&&n.attr("dir","auto")}catch(t){}return n.wrap(e).parent().prepend(s).append(i)}function s(e){var i=e.find(".tt-query");t.each(i.data("ttAttrs"),function(e,n){t.isUndefined(n)?i.removeAttr(e):i.attr(e,n)}),i.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(e),e.remove()}var r={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},o={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return t.isMsie()&&t.mixin(o.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&(t.mixin(o.wrapper,{display:"inline",zoom:"1"}),t.mixin(o.query,{marginTop:"-1px"})),t.mixin(i.prototype,e,{_managePreventDefault:function(t){var e,i,n=t.data,s=!1;switch(t.type){case"tabKeyed":e=this.inputView.getHintValue(),i=this.inputView.getInputValue(),s=e&&e!==i;break;case"upKeyed":case"downKeyed":s=!n.shiftKey&&!n.ctrlKey&&!n.metaKey}s&&n.preventDefault()},_setLanguageDirection:function(){var t=this.inputView.getLanguageDirection();t!==this.dir&&(this.dir=t,this.$node.css("direction",t),this.dropdownView.setLanguageDirection(t))},_updateHint:function(){var e,i,n,s,r,o=this.dropdownView.getFirstSuggestion(),u=o?o.value:null,a=this.dropdownView.isVisible(),c=this.inputView.isOverflow();u&&a&&!c&&(e=this.inputView.getInputValue(),i=e.replace(/\s{2,}/g," ").replace(/^\s+/g,""),n=t.escapeRegExChars(i),s=new RegExp("^(?:"+n+")(.*$)","i"),r=s.exec(u),this.inputView.setHintValue(e+(r?r[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(t){var e=t.data;this.inputView.setInputValue(e.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(t){this.dropdownView["blured"===t.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(t){var e=t.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["upKeyed"===t.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(e){var i="suggestionSelected"===e.type,n=i?e.data:this.dropdownView.getSuggestionUnderCursor();n&&(this.inputView.setInputValue(n.value),i?this.inputView.focus():e.data.preventDefault(),i&&t.isMsie()?t.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",n.datum,n.dataset))},_getSuggestions:function(){var e=this,i=this.inputView.getQuery();t.isBlankString(i)||t.each(this.datasets,function(t,n){n.getSuggestions(i,function(t){i===e.inputView.getQuery()&&e.dropdownView.renderSuggestions(n,t)})})},_autocomplete:function(t){var e,i,n,s,r;("rightKeyed"!==t.type&&"leftKeyed"!==t.type||(e=this.inputView.isCursorAtEnd(),i="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===t.type:"rightKeyed"===t.type,e&&!i))&&(n=this.inputView.getQuery(),""!==(s=this.inputView.getHintValue())&&n!==s&&(r=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.datum,r.dataset)))},_propagateEvent:function(t){this.eventBus.trigger(t.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),s(this.$node),this.$node=null},setQuery:function(t){this.inputView.setQuery(t),this.inputView.setInputValue(t),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),i}();!function(){var e,n={},s="ttView";e={initialize:function(e){function r(){var e,n=$(this),r=new i({el:n});e=t.map(u,function(t){return t.initialize()}),n.data(s,new c({input:n,eventBus:r=new i({el:n}),datasets:u})),$.when.apply($,e).always(function(){t.defer(function(){r.trigger("initialized")})})}var u;return e=t.isArray(e)?e:[e],0===e.length&&$.error("no datasets provided"),u=t.map(e,function(t){var e=n[t.name]?n[t.name]:new o(t);return t.name&&(n[t.name]=e),e}),this.each(r)},destroy:function(){function t(){var t=$(this),e=t.data(s);e&&(e.destroy(),t.removeData(s))}return this.each(t)},setQuery:function(t){function e(){var e=$(this).data(s);e&&e.setQuery(t)}return this.each(e)}},jQuery.fn.typeahead=function(t){return e[t]?e[t].apply(this,[].slice.call(arguments,1)):e.initialize.apply(this,arguments)}}()}(window.jQuery);