!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function($){"use strict";var e=$.blueimp.fileupload.prototype.options.add;$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{processQueue:[],add:function(s,r){var i=$(this);r.process(function(){return i.fileupload("process",r)}),e.call(this,s,r)}},processActions:{},_processFile:function(e,s){var r=this,i=$.Deferred().resolveWith(r,[e]),o=i.promise();return this._trigger("process",null,e),$.each(e.processQueue,function(e,i){var t=function(e){return s.errorThrown?$.Deferred().rejectWith(r,[s]).promise():r.processActions[i.action].call(r,e,i)};o=o.pipe(t,i.always&&t)}),o.done(function(){r._trigger("processdone",null,e),r._trigger("processalways",null,e)}).fail(function(){r._trigger("processfail",null,e),r._trigger("processalways",null,e)}),o},_transformProcessQueue:function(e){var s=[];$.each(e.processQueue,function(){var r={},i=this.action,o=!0===this.prefix?i:this.prefix;$.each(this,function(s,i){"string"===$.type(i)&&"@"===i.charAt(0)?r[s]=e[i.slice(1)||(o?o+s.charAt(0).toUpperCase()+s.slice(1):s)]:r[s]=i}),s.push(r)}),e.processQueue=s},processing:function(){return this._processing},process:function(e){var s=this,r=$.extend({},this.options,e);return r.processQueue&&r.processQueue.length&&(this._transformProcessQueue(r),0===this._processing&&this._trigger("processstart"),$.each(e.files,function(i){var o=i?$.extend({},r):r,t=function(){return e.errorThrown?$.Deferred().rejectWith(s,[e]).promise():s._processFile(o,e)};o.index=i,s._processing+=1,s._processingQueue=s._processingQueue.pipe(t,t).always(function(){s._processing-=1,0===s._processing&&s._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=$.Deferred().resolveWith(this).promise()}})});