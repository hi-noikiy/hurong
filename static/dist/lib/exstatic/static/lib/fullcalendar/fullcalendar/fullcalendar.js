!function($,t){function e(t){$.extend(!0,Ct,t)}function n(e,n,l){function c(t){at?g()&&(E(),C(t)):u()}function u(){ot=n.theme?"ui":"fc",e.addClass("fc"),n.isRTL?e.addClass("fc-rtl"):e.addClass("fc-ltr"),n.theme&&e.addClass("ui-widget"),at=$("<div class='fc-content' style='position:relative'/>").prependTo(e),nt=new r(et,n),rt=nt.render(),rt&&e.prepend(rt),m(n.defaultView),n.handleWindowResize&&$(window).resize(T),p()||d()}function d(){setTimeout(function(){!it.start&&p()&&D()},0)}function v(){it&&(tt("viewDestroy",it,it,it.element),it.triggerEventDestroy()),$(window).unbind("resize",T),nt.destroy(),at.remove(),e.removeClass("fc fc-rtl ui-widget")}function g(){return e.is(":visible")}function p(){return $("body").is(":visible")}function m(t){it&&t==it.name||b(t)}function b(t){ht++,it&&(tt("viewDestroy",it,it,it.element),q(),it.triggerEventDestroy(),Z(),it.element.remove(),nt.deactivateButton(it.name)),nt.activateButton(t),it=new St[t]($("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(at),et),D(),G(),ht--}function D(t){(!it.start||t||gt<it.start||gt>=it.end)&&g()&&C(t)}function C(t){ht++,it.start&&(tt("viewDestroy",it,it,it.element),q(),R()),Z(),it.render(gt,t||0),S(),G(),(it.afterRender||W)(),L(),_(),tt("viewRender",it,it,it.element),it.trigger("viewDisplay",dt),ht--,N()}function M(){g()&&(q(),R(),E(),S(),H())}function E(){lt=n.contentHeight?n.contentHeight:n.height?n.height-(rt?rt.height():0)-F(at):Math.round(at.width()/Math.max(n.aspectRatio,.5))}function S(){lt===t&&E(),ht++,it.setHeight(lt),it.setWidth(at.width()),ht--,st=e.outerWidth()}function T(){if(!ht)if(it.start){var t=++vt;setTimeout(function(){t==vt&&!ht&&g()&&st!=(st=e.outerWidth())&&(ht++,M(),it.trigger("windowResize",dt),ht--)},200)}else d()}function x(){R(),z()}function k(t){R(),H(t)}function H(t){g()&&(it.setEventData(pt),it.renderEvents(pt,t),it.trigger("eventAfterAllRender"))}function R(){it.triggerEventDestroy(),it.clearEvents(),it.clearEventData()}function N(){!n.lazyFetching||ut(it.visStart,it.visEnd)?z():H()}function z(){ft(it.visStart,it.visEnd)}function A(t){pt=t,H()}function O(t){k(t)}function L(){nt.updateTitle(it.title)}function _(){var t=new Date;t>=it.start&&t<it.end?nt.disableButton("today"):nt.enableButton("today")}function P(e,n,r){it.select(e,n,r===t||r)}function q(){it&&it.unselect()}function Y(){D(-1)}function B(){D(1)}function j(){o(gt,-1),D()}function I(){o(gt,1),D()}function X(){gt=new Date,D()}function J(t,e,n){t instanceof Date?gt=f(t):h(gt,t,e,n),D()}function V(e,n,r){e!==t&&o(gt,e),n!==t&&i(gt,n),r!==t&&s(gt,r),D()}function U(){return f(gt)}function Z(){at.css({width:"100%",height:at.height(),overflow:"hidden"})}function G(){at.css({width:"",height:"",overflow:""})}function Q(){return it}function K(e,r){if(r===t)return n[e];"height"!=e&&"contentHeight"!=e&&"aspectRatio"!=e||(n[e]=r,M())}function tt(t,e){if(n[t])return n[t].apply(e||dt,Array.prototype.slice.call(arguments,2))}var et=this;et.options=n,et.render=c,et.destroy=v,et.refetchEvents=x,et.reportEvents=A,et.reportEventChange=O,et.rerenderEvents=k,et.changeView=m,et.select=P,et.unselect=q,et.prev=Y,et.next=B,et.prevYear=j,et.nextYear=I,et.today=X,et.gotoDate=J,et.incrementDate=V,et.formatDate=function(t,e){return y(t,e,n)},et.formatDates=function(t,e,r){return w(t,e,r,n)},et.getDate=U,et.getView=Q,et.option=K,et.trigger=tt,a.call(et,n,l);var nt,rt,at,ot,it,st,lt,ct,ut=et.isFetchNeeded,ft=et.fetchEvents,dt=e[0],vt=0,ht=0,gt=new Date,pt=[];h(gt,n.year,n.month,n.date),n.droppable&&$(document).bind("dragstart",function(t,e){var r=t.target,a=$(r);if(!a.parents(".fc").length){var o=n.dropAccept;($.isFunction(o)?o.call(r,a):a.is(o))&&(ct=r,it.dragStart(ct,t,e))}}).bind("dragstop",function(t,e){ct&&(it.dragStop(ct,t,e),ct=null)})}function r(t,e){function n(){if(f=e.theme?"ui":"fc",e.header)return d=$("<table class='fc-header' style='width:100%'/>").append($("<tr/>").append(a("left")).append(a("center")).append(a("right")))}function r(){d.remove()}function a(n){var r=$("<td class='fc-header-"+n+"'/>"),a=e.header[n];return a&&$.each(a.split(" "),function(n){n>0&&r.append("<span class='fc-header-space'/>");var a;$.each(this.split(","),function(n,o){if("title"==o)r.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),a&&a.addClass(f+"-corner-right"),a=null;else{var i;if(t[o]?i=t[o]:St[o]&&(i=function(){c.removeClass(f+"-state-hover"),t.changeView(o)}),i){var s=e.theme?_(e.buttonIcons,o):null,l=_(e.buttonText,o),c=$("<span class='fc-button fc-button-"+o+" "+f+"-state-default'>"+(s?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+s+"'/></span>":l)+"</span>").click(function(){c.hasClass(f+"-state-disabled")||i()}).mousedown(function(){c.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){c.removeClass(f+"-state-down")}).hover(function(){c.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){c.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(r);q(c),a||c.addClass(f+"-corner-left"),a=c}}}),a&&a.addClass(f+"-corner-right")}),r}function o(t){d.find("h2").html(t)}function i(t){d.find("span.fc-button-"+t).addClass(f+"-state-active")}function s(t){d.find("span.fc-button-"+t).removeClass(f+"-state-active")}function l(t){d.find("span.fc-button-"+t).addClass(f+"-state-disabled")}function c(t){d.find("span.fc-button-"+t).removeClass(f+"-state-disabled")}var u=this;u.render=n,u.destroy=r,u.updateTitle=o,u.activateButton=i,u.deactivateButton=s,u.disableButton=l,u.enableButton=c;var f,d=$([])}function a(e,n){function r(t,e){return!M||t<M||e>E}function a(t,e){M=t,E=e,z=[];var n=++F,r=H.length;R=r;for(var a=0;a<r;a++)o(H[a],n)}function o(t,n){i(t,function(r){if(n==F){if(r){e.eventDataTransform&&(r=$.map(r,e.eventDataTransform)),t.eventDataTransform&&(r=$.map(r,t.eventDataTransform));for(var a=0;a<r.length;a++)r[a].source=t,y(r[a]);z=z.concat(r)}R--,R||x(z)}})}function i(t,n){var r,a,o=Et.sourceFetchers;for(r=0;r<o.length;r++){if(!0===(a=o[r](t,M,E,n)))return;if("object"==typeof a)return void i(a,n)}var s=t.events;if(s)$.isFunction(s)?(p(),s(f(M),f(E),function(t){n(t),m()})):$.isArray(s)?n(s):n();else{if(t.url){var l,c=t.success,u=t.error,d=t.complete;l=$.isFunction(t.data)?t.data():t.data;var v=$.extend({},l||{}),h=I(t.startParam,e.startParam),g=I(t.endParam,e.endParam);h&&(v[h]=Math.round(+M/1e3)),g&&(v[g]=Math.round(+E/1e3)),p(),$.ajax($.extend({},Tt,t,{data:v,success:function(t){t=t||[];var e=j(c,this,arguments);$.isArray(e)&&(t=e),n(t)},error:function(){j(u,this,arguments),n()},complete:function(){j(d,this,arguments),m()}}))}else n()}}function s(t){(t=l(t))&&(R++,o(t,F))}function l(t){if($.isFunction(t)||$.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t)return w(t),H.push(t),t}function c(t){H=$.grep(H,function(e){return!b(e,t)}),z=$.grep(z,function(e){return!b(e.source,t)}),x(z)}function u(t){var e,n,r=z.length,a=T().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)n=z[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,y(n));y(t),x(z)}function d(t,e){y(t),t.source||(e&&(k.events.push(t),t.source=k),z.push(t)),x(z)}function v(t){if(t){if(!$.isFunction(t)){var e=t+"";t=function(t){return t._id==e}}z=$.grep(z,t,!0);for(var n=0;n<H.length;n++)$.isArray(H[n].events)&&(H[n].events=$.grep(H[n].events,t,!0))}else{z=[];for(var n=0;n<H.length;n++)$.isArray(H[n].events)&&(H[n].events=[])}x(z)}function h(t){return $.isFunction(t)?$.grep(z,t):t?(t+="",$.grep(z,function(e){return e._id==t})):z}function p(){N++||S("loading",null,!0,T())}function m(){--N||S("loading",null,!1,T())}function y(n){var r=n.source||{},a=I(r.ignoreTimezone,e.ignoreTimezone);n._id=n._id||(n.id===t?"_fc"+xt++:n.id+""),n.date&&(n.start||(n.start=n.date),delete n.date),n._start=f(n.start=g(n.start,a)),n.end=g(n.end,a),n.end&&n.end<=n.start&&(n.end=null),n._end=n.end?f(n.end):null,n.allDay===t&&(n.allDay=I(r.allDayDefault,e.allDayDefault)),n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[]}function w(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Et.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function b(t,e){return t&&e&&D(t)==D(e)}function D(t){return("object"==typeof t?t.events||t.url:"")||t}var C=this;C.isFetchNeeded=r,C.fetchEvents=a,C.addEventSource=s,C.removeEventSource=c,C.updateEvent=u,C.renderEvent=d,C.removeEvents=v,C.clientEvents=h,C.normalizeEvent=y;for(var M,E,S=C.trigger,T=C.getView,x=C.reportEvents,k={events:[]},H=[k],F=0,R=0,N=0,z=[],W=0;W<n.length;W++)l(n[W])}function o(t,e,n){return t.setFullYear(t.getFullYear()+e),n||u(t),t}function i(t,e,n){if(+t){var r=t.getMonth()+e,a=f(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||u(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function s(t,e,n){if(+t){var r=t.getDate()+e,a=f(t);a.setHours(9),a.setDate(r),t.setDate(r),n||u(t),l(t,a)}return t}function l(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*Ft)}function c(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function f(t,e){return e?u(new Date(+t)):new Date(+t)}function d(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function v(t,e){return Math.round((f(t,!0)-f(e,!0))/Ht)}function h(e,n,r,a){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),r!==t&&r!=e.getMonth()&&(e.setDate(1),e.setMonth(r)),a!==t&&e.setDate(a)}function g(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),p(e,n)||(e?new Date(e):null)):null}function p(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),l(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),l(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function m(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function y(t,e,n){return w(t,null,e,n)}function w(t,e,n,r){r=r||Ct;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;a<u;a++)if("'"==(o=n.charAt(a))){for(i=a+1;i<u;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;i<u;i++)if(")"==n.charAt(i)){var d=y(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;i<u;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=y(l,v,r);d!=y(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;i>a;i--)if(s=Nt[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function b(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function D(t){return t.end?C(t.end,t.allDay):s(f(t.start),1)}function C(t,e){return t=f(t),e||t.getHours()||t.getMinutes()?s(t,1):u(t)}function M(e,n,r){e.unbind("mouseover").mouseover(function(e){for(var a,o,i,s=e.target;s!=this;)a=s,s=s.parentNode;(o=a._fci)!==t&&(a._fci=t,i=n[o],r(i.event,i.element,i),$(e.target).trigger(e)),e.stopPropagation()})}function E(t,e,n){for(var r,a=0;a<t.length;a++)r=$(t[a]),r.width(Math.max(0,e-T(r,n)))}function S(t,e,n){for(var r,a=0;a<t.length;a++)r=$(t[a]),r.height(Math.max(0,e-F(r,n)))}function T(t,e){return x(t)+H(t)+(e?k(t):0)}function x(t){return(parseFloat($.css(t[0],"paddingLeft",!0))||0)+(parseFloat($.css(t[0],"paddingRight",!0))||0)}function k(t){return(parseFloat($.css(t[0],"marginLeft",!0))||0)+(parseFloat($.css(t[0],"marginRight",!0))||0)}function H(t){return(parseFloat($.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat($.css(t[0],"borderRightWidth",!0))||0)}function F(t,e){return R(t)+z(t)+(e?N(t):0)}function R(t){return(parseFloat($.css(t[0],"paddingTop",!0))||0)+(parseFloat($.css(t[0],"paddingBottom",!0))||0)}function N(t){return(parseFloat($.css(t[0],"marginTop",!0))||0)+(parseFloat($.css(t[0],"marginBottom",!0))||0)}function z(t){return(parseFloat($.css(t[0],"borderTopWidth",!0))||0)+(parseFloat($.css(t[0],"borderBottomWidth",!0))||0)}function W(){}function A(t,e){return t-e}function O(t){return Math.max.apply(Math,t)}function L(t){return(t<10?"0":"")+t}function _(e,n){if(e[n]!==t)return e[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if((r=e[a[o].toLowerCase()])!==t)return r;return e[""]}function P(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function q(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Y(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function B(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function j(t,e,n){if($.isFunction(t)&&(t=[t]),t){var r,a;for(r=0;r<t.length;r++)a=t[r].apply(e,n)||a;return a}}function I(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function X(t,e){function n(t,e){e&&(i(t,e),t.setDate(1));var n=a("firstDay"),d=f(t,!0);d.setDate(1);var h=i(f(d),1),g=f(d);s(g,-(g.getDay()-n+7)%7),l(g);var p=f(h);s(p,(7-p.getDay()+n)%7),l(p,-1,!0);var m=c(),y=Math.round(v(p,g)/7);"fixed"==a("weekMode")&&(s(p,7*(6-y)),y=6),r.title=u(d,a("titleFormat")),r.start=d,r.end=h,r.visStart=g,r.visEnd=p,o(y,m,!0)}var r=this;r.render=n,U.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,l=r.skipHiddenDays,c=r.getCellsPerWeek,u=e.formatDate}function J(t,e){function n(t,e){e&&s(t,7*e);var n=s(f(t),-(t.getDay()-a("firstDay")+7)%7),u=s(f(n),7),d=f(n);i(d);var v=f(u);i(v,-1,!0);var h=l();r.start=n,r.end=u,r.visStart=d,r.visEnd=v,r.title=c(d,s(f(v),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,U.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,l=r.getCellsPerWeek,c=e.formatDates}function V(t,e){function n(t,e){e&&s(t,e),i(t,e<0?-1:1);var n=f(t,!0),c=s(f(n),1);r.title=l(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1,1,!1)}var r=this;r.render=n,U.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,l=e.formatDate}function U(t,e,n){function r(t,e,n){et=t,nt=e,rt=n,a(),B||o(),i()}function a(){lt=ht("theme")?"ui":"fc",ct=ht("columnFormat"),ut=ht("weekNumbers"),dt=ht("weekNumberTitle"),vt="iso"!=ht("weekNumberCalculation")?"w":"W"}function o(){U=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function i(){var e=l();O&&O.remove(),O=$(e).appendTo(t),L=O.find("thead"),_=L.find(".fc-day-header"),B=O.find("tbody"),j=B.find("tr"),I=B.find(".fc-day"),X=j.find("td:first-child"),J=j.eq(0).find(".fc-day > div"),V=j.eq(0).find(".fc-day-content > div"),Y(L.add(L.find("tr"))),Y(j),j.eq(0).addClass("fc-first"),j.filter(":last").addClass("fc-last"),I.each(function(t,e){var n=Et(Math.floor(t/nt),t%nt);gt("dayRender",A,n,$(e))}),m(I)}function l(){return"<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+d()+"</table>"}function c(){var t,e,n=lt+"-widget-header",r="";for(r+="<thead><tr>",ut&&(r+="<th class='fc-week-number "+n+"'>"+P(dt)+"</th>"),t=0;t<nt;t++)e=Et(0,t),r+="<th class='fc-day-header fc-"+kt[e.getDay()]+" "+n+"'>"+P(xt(e,ct))+"</th>";return r+="</tr></thead>"}function d(){var t,e,n,r=lt+"-widget-content",a="";for(a+="<tbody>",t=0;t<et;t++){for(a+="<tr class='fc-week'>",ut&&(n=Et(t,0),a+="<td class='fc-week-number "+r+"'><div>"+P(xt(n,vt))+"</div></td>"),e=0;e<nt;e++)n=Et(t,e),a+=v(n);a+="</tr>"}return a+="</tbody>"}function v(t){var e=lt+"-widget-content",n=A.start.getMonth(),r=u(new Date),a="",o=["fc-day","fc-"+kt[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",lt+"-state-highlight"):t<r?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"' data-date='"+xt(t,"yyyy-MM-dd")+"'><div>",rt&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function h(t){Q=t;var e,n,r,a=Q-L.height();"variable"==ht("weekMode")?e=n=Math.floor(a/(1==et?2:6)):(e=Math.floor(a/et),n=a-e*(et-1)),X.each(function(t,a){t<et&&(r=$(a),r.find("> div").css("min-height",(t==et-1?n:e)-F(r)))})}function g(t){G=t,it.clear(),st.clear(),tt=0,ut&&(tt=L.find("th.fc-week-number").outerWidth()),K=Math.floor((G-tt)/nt),E(_.slice(0,-1),K)}function m(t){t.click(y).mousedown(Mt)}function y(t){if(!ht("selectable")){var e=p($(this).data("date"));gt("dayClick",this,e,!0,t)}}function w(t,e,n){n&&at.build();for(var r=Tt(t,e),a=0;a<r.length;a++){var o=r[a];m(b(o.row,o.leftCol,o.row,o.rightCol))}}function b(e,n,r,a){var o=at.rect(e,n,r,a,t);return bt(o,t)}function D(t,e){return f(t)}function C(t,e,n){w(t,s(f(e),1),!0)}function M(){Ct()}function S(t,e,n){var r=St(t),a=I[r.row*nt+r.col];gt("dayClick",a,t,e,n)}function T(t,e,n){ot.start(function(t){Ct(),t&&b(t.row,t.col,t.row,t.col)},e)}function x(t,e,n){var r=ot.stop();if(Ct(),r){var a=Et(r);gt("drop",t,a,!0,e,n)}}function k(t){return f(t.start)}function H(t){return it.left(t)}function R(t){return it.right(t)}function N(t){return st.left(t)}function z(t){return st.right(t)}function W(t){return j.eq(t)}var A=this;A.renderBasic=r,A.setHeight=h,A.setWidth=g,A.renderDayOverlay=w,A.defaultSelectionEnd=D,A.renderSelection=C,A.clearSelection=M,A.reportDayClick=S,A.dragStart=T,A.dragStop=x,A.defaultEventEnd=k,A.getHoverListener=function(){return ot},A.colLeft=H,A.colRight=R,A.colContentLeft=N,A.colContentRight=z,A.getIsCellAllDay=function(){return!0},A.allDayRow=W,A.getRowCnt=function(){return et},A.getColCnt=function(){return nt},A.getColWidth=function(){return K},A.getDaySegmentContainer=function(){return U},ft.call(A,t,e,n),mt.call(A),pt.call(A),Z.call(A);var O,L,_,B,j,I,X,J,V,U,G,Q,K,tt,et,nt,rt,at,ot,it,st,lt,ct,ut,dt,vt,ht=A.opt,gt=A.trigger,bt=A.renderOverlay,Ct=A.clearOverlays,Mt=A.daySelectionMousedown,Et=A.cellToDate,St=A.dateToCell,Tt=A.rangeToSegments,xt=e.formatDate;q(t.addClass("fc-grid")),at=new yt(function(t,e){var n,r,a;_.each(function(t,o){n=$(o),r=n.offset().left,t&&(a[1]=r),a=[r],e[t]=a}),a[1]=r+n.outerWidth(),j.each(function(e,o){e<et&&(n=$(o),r=n.offset().top,e&&(a[1]=r),a=[r],t[e]=a)}),a[1]=r+n.outerHeight()}),ot=new wt(at),it=new Dt(function(t){return J.eq(t)}),st=new Dt(function(t){return V.eq(t)})}function Z(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,dt.call(n)}function G(t,e){function n(t,e){e&&s(t,7*e);var n=s(f(t),-(t.getDay()-a("firstDay")+7)%7),u=s(f(n),7),d=f(n);i(d);var v=f(u);i(v,-1,!0);var h=l();r.title=c(d,s(f(v),-1),a("titleFormat")),r.start=n,r.end=u,r.visStart=d,r.visEnd=v,o(h)}var r=this;r.render=n,K.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,l=r.getCellsPerWeek,c=e.formatDates}function Q(t,e){function n(t,e){e&&s(t,e),i(t,e<0?-1:1);var n=f(t,!0),c=s(f(n),1);r.title=l(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1)}var r=this;r.render=n,K.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,l=e.formatDate}function K(e,n,r){function a(t){Wt=t,o(),K?l():i()}function o(){qt=Ut("theme")?"ui":"fc",Yt=Ut("isRTL"),Bt=m(Ut("minTime")),jt=m(Ut("maxTime")),It=Ut("columnFormat"),Xt=Ut("weekNumbers"),Jt=Ut("weekNumberTitle"),Vt="iso"!=Ut("weekNumberCalculation")?"w":"W",Rt=Ut("snapMinutes")||Ut("slotMinutes")}function i(){var t,n,r,a,o,i=qt+"-widget-header",s=qt+"-widget-content",u=Ut("slotMinutes")%15==0;for(l(),ct=$("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(e),Ut("allDaySlot")?(ut=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ct),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+i+" fc-agenda-axis'>"+Ut("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+i+" fc-agenda-gutter'>&nbsp;</th></tr></table>",dt=$(t).appendTo(ct),vt=dt.find("tr"),D(vt.find("td")),ct.append("<div class='fc-agenda-divider "+i+"'><div class='fc-agenda-divider-inner'/></div>")):ut=$([]),ht=$("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ct),gt=$("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ht),bt=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(gt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=d(),a=c(f(n),jt),c(n,Bt),At=0,r=0;n<a;r++)o=n.getMinutes(),t+="<tr class='fc-slot"+r+" "+(o?"fc-minor":"")+"'><th class='fc-agenda-axis "+i+"'>"+(u&&o?"&nbsp;":oe(n,Ut("axisFormat")))+"</th><td class='"+s+"'><div style='position:relative'>&nbsp;</div></td></tr>",c(n,Ut("slotMinutes")),At++;t+="</tbody></table>",Ct=$(t).appendTo(gt),C(Ct.find("td"))}function l(){var t=v();K&&K.remove(),K=$(t).appendTo(e),et=K.find("thead"),nt=et.find("th").slice(1,-1),rt=K.find("tbody"),at=rt.find("td").slice(0,-1),ot=at.find("> div"),it=at.find(".fc-day-content > div"),st=at.eq(0),lt=ot.eq(0),Y(et.add(et.find("tr"))),Y(rt.add(rt.find("tr")))}function v(){return"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+h()+g()+"</table>"}function h(){var t,e,n,r=qt+"-widget-header",a="";for(a+="<thead><tr>",Xt?(t=ne(0,0),e=oe(t,Vt),Yt?e+=Jt:e=Jt+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+P(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;n<Wt;n++)t=ne(0,n),a+="<th class='fc-"+kt[t.getDay()]+" fc-col"+n+" "+r+"'>"+P(oe(t,It))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>"}function g(){var t,e,n,r,a,o=qt+"-widget-header",i=qt+"-widget-content",s=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;e<Wt;e++)t=ne(0,e),a=["fc-col"+e,"fc-"+kt[t.getDay()],i],+t==+s?a.push(qt+"-state-highlight","fc-today"):t<s?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td></tr></tbody>"}function p(e){e===t&&(e=St),St=e,ie={};var n=rt.position().top,r=ht.position().top,a=Math.min(e-n,Ct.height()+r+1);lt.height(a-F(st)),ct.css("top",n),ht.height(a-r-1),Ft=Ct.find("tr:first").height()+1,Nt=Ut("slotMinutes")/Rt,zt=Ft/Nt}function y(t){Et=t,_t.clear(),Pt.clear();var e=et.find("th:first");dt&&(e=e.add(dt.find("th:first"))),e=e.add(Ct.find("th:first")),Tt=0,E(e.width("").each(function(t,e){Tt=Math.max(Tt,$(e).outerWidth())}),Tt);var n=K.find(".fc-agenda-gutter");dt&&(n=n.add(dt.find("th.fc-agenda-gutter")));var r=ht[0].clientWidth;Ht=ht.width()-r,Ht?(E(n,Ht),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),xt=Math.floor((r-Tt)/Wt),E(nt.slice(0,-1),xt)}function w(){function t(){ht.scrollTop(r)}var e=d(),n=f(e);n.setHours(Ut("firstHour"));var r=L(e,n)+1;t(),setTimeout(t,0)}function b(){w()}function D(t){t.click(M).mousedown(te)}function C(t){t.click(M).mousedown(V)}function M(t){if(!Ut("selectable")){var e=Math.min(Wt-1,Math.floor((t.pageX-K.offset().left-Tt)/xt)),n=ne(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Ut("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Bt),Zt("dayClick",at[e],n,!1,t)}else Zt("dayClick",at[e],n,!0,t)}}function T(t,e,n){n&&Ot.build();for(var r=ae(t,e),a=0;a<r.length;a++){var o=r[a];D(x(o.row,o.leftCol,o.row,o.rightCol))}}function x(t,e,n,r){var a=Ot.rect(t,e,n,r,ct);return Gt(a,ct)}function k(t,e){for(var n=0;n<Wt;n++){var r=ne(0,n),a=s(f(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(o<i){var l=Ot.rect(0,n,0,n,gt),c=L(r,o),u=L(r,i);l.top=c,l.height=u-c,C(Gt(l,gt))}}}function H(t){return _t.left(t)}function R(t){return Pt.left(t)}function N(t){return _t.right(t)}function z(t){return Pt.right(t)}function W(t){return Ut("allDaySlot")&&!t.row}function O(t){var e=ne(0,t.col),n=t.row;return Ut("allDaySlot")&&n--,n>=0&&c(e,Bt+n*Rt),e}function L(e,n){if(e=f(e,!0),n<c(f(e),Bt))return 0;if(n>=c(f(e),jt))return Ct.height();var r=Ut("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Bt,o=Math.floor(a/r),i=ie[o];return i===t&&(i=ie[o]=Ct.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+Ft*(a%r/r)))}function _(t){return vt}function B(t){var e=f(t.start);return t.allDay?e:c(e,Ut("defaultEventMinutes"))}function j(t,e){return e?f(t):c(f(t),Ut("slotMinutes"))}function I(t,e,n){n?Ut("allDaySlot")&&T(t,s(f(e),1),!0):X(t,e)}function X(t,e){var n=Ut("selectHelper");if(Ot.build(),n){var r=re(t).col;if(r>=0&&r<Wt){var a=Ot.rect(0,r,0,r,gt),o=L(t,t),i=L(t,e);if(i>o){if(a.top=o,a.height=i-o,a.left+=2,a.width-=5,$.isFunction(n)){var s=n(t,e);s&&(a.position="absolute",Mt=$(s).css(a).appendTo(gt))}else a.isStart=!0,a.isEnd=!0,Mt=$(ee({title:"",start:t,end:e,className:["fc-select-helper"],editable:!1},a)),Mt.css("opacity",Ut("dragOpacity"));Mt&&(C(Mt),gt.append(Mt),E(Mt,a.width,!0),S(Mt,a.height,!0))}}}else k(t,e)}function J(){$t(),Mt&&(Mt.remove(),Mt=null)}function V(t){if(1==t.which&&Ut("selectable")){Kt(t);var e;Lt.start(function(t,n){if(J(),t&&t.col==n.col&&!W(t)){var r=O(n),a=O(t);e=[r,c(f(r),Rt),a,c(f(a),Rt)].sort(A),X(e[0],e[3])}else e=null},t),$(document).one("mouseup",function(t){Lt.stop(),e&&(+e[0]==+e[1]&&U(e[0],!1,t),Qt(e[0],e[3],!1,t))})}}function U(t,e,n){Zt("dayClick",at[re(t).col],t,e,n)}function Z(t,e,n){Lt.start(function(t){if($t(),t)if(W(t))x(t.row,t.col,t.row,t.col);else{var e=O(t),n=c(f(e),Ut("defaultEventMinutes"));k(e,n)}},e)}function G(t,e,n){var r=Lt.stop();$t(),r&&Zt("drop",t,O(r),W(r),e,n)}var Q=this;Q.renderAgenda=a,Q.setWidth=y,Q.setHeight=p,Q.afterRender=b,Q.defaultEventEnd=B,Q.timePosition=L,Q.getIsCellAllDay=W,Q.allDayRow=_,Q.getCoordinateGrid=function(){return Ot},Q.getHoverListener=function(){return Lt},Q.colLeft=H,Q.colRight=N,Q.colContentLeft=R,Q.colContentRight=z,Q.getDaySegmentContainer=function(){return ut},Q.getSlotSegmentContainer=function(){return bt},Q.getMinMinute=function(){return Bt},Q.getMaxMinute=function(){return jt},Q.getSlotContainer=function(){return gt},Q.getRowCnt=function(){return 1},Q.getColCnt=function(){return Wt},Q.getColWidth=function(){return xt},Q.getSnapHeight=function(){return zt},Q.getSnapMinutes=function(){return Rt},Q.defaultSelectionEnd=j,Q.renderDayOverlay=T,Q.renderSelection=I,Q.clearSelection=J,Q.reportDayClick=U,Q.dragStart=Z,Q.dragStop=G,ft.call(Q,e,n,r),mt.call(Q),pt.call(Q),tt.call(Q);var K,et,nt,rt,at,ot,it,st,lt,ct,ut,dt,vt,ht,gt,bt,Ct,Mt,Et,St,Tt,xt,Ht,Ft,Rt,Nt,zt,Wt,At,Ot,Lt,_t,Pt,qt,Yt,Bt,jt,It,Xt,Jt,Vt,Ut=Q.opt,Zt=Q.trigger,Gt=Q.renderOverlay,$t=Q.clearOverlays,Qt=Q.reportSelection,Kt=Q.unselect,te=Q.daySelectionMousedown,ee=Q.slotSegHtml,ne=Q.cellToDate,re=Q.dateToCell,ae=Q.rangeToSegments,oe=n.formatDate,ie={};q(e.addClass("fc-agenda")),Ot=new yt(function(t,e){function n(t){return Math.max(s,Math.min(l,t))}var r,a,o;nt.each(function(t,n){r=$(n),a=r.offset().left,t&&(o[1]=a),o=[a],e[t]=o}),o[1]=a+r.outerWidth(),Ut("allDaySlot")&&(r=vt,a=r.offset().top,t[0]=[a,a+r.outerHeight()]);for(var i=gt.offset().top,s=ht.offset().top,l=s+ht.outerHeight(),c=0;c<At*Nt;c++)t.push([n(i+zt*c),n(i+zt*(c+1))])}),Lt=new wt(Ot),_t=new Dt(function(t){return ot.eq(t)}),Pt=new Dt(function(t){return it.eq(t)})}function tt(){function e(t,e){var n,a=t.length,o=[],s=[];for(n=0;n<a;n++)t[n].allDay?o.push(t[n]):s.push(t[n]);m("allDaySlot")&&(tt(o,e),x()),i(r(s),e)}function n(){k().empty(),H().empty()}function r(t){var e,n,r,i,s,l=q(),u=z(),d=N(),v=$.map(t,o),h=[];for(n=0;n<l;n++)for(e=_(0,n),c(e,u),s=a(t,v,e,c(f(e),d-u)),s=et(s),r=0;r<s.length;r++)i=s[r],i.col=n,h.push(i);return h}function a(t,e,n,r){var a,o,i,s,l,c,u,d,v=[],h=t.length;for(a=0;a<h;a++)o=t[a],i=o.start,(s=e[a])>n&&i<r&&(i<n?(l=f(n),u=!1):(l=i,u=!0),s>r?(c=f(r),d=!1):(c=s,d=!0),v.push({event:o,start:l,end:c,isStart:u,isEnd:d}));return v.sort(ut)}function o(t){return t.end?f(t.end):c(f(t.start),m("defaultEventMinutes"))}function i(e,n){var r,a,o,i,s,c,f,d,v,h,g,p,w,b,D,C,E=e.length,S="",x=H(),k=m("isRTL");for(r=0;r<E;r++)a=e[r],o=a.event,i=W(a.start,a.start),s=W(a.start,a.end),c=O(a.col),f=L(a.col),d=f-c,f-=.025*d,d=f-c,v=d*(a.forwardCoord-a.backwardCoord),m("slotEventOverlap")&&(v=Math.max(2*(v-10),v)),k?(g=f-a.backwardCoord*d,h=g-v):(h=c+a.backwardCoord*d,g=h+v),h=Math.max(h,c),g=Math.min(g,f),v=g-h,a.top=i,a.left=h,a.outerWidth=v,a.outerHeight=s-i,S+=l(o,a);for(x[0].innerHTML=S,p=x.children(),r=0;r<E;r++)a=e[r],o=a.event,w=$(p[r]),b=y("eventRender",o,o,w),!1===b?w.remove():(b&&!0!==b&&(w.remove(),w=$(b).css({position:"absolute",top:a.top,left:a.left}).appendTo(x)),a.element=w,o._id===n?u(o,w,a):w[0]._fci=r,J(o,w));for(M(x,e,u),r=0;r<E;r++)a=e[r],(w=a.element)&&(a.vsides=F(w,!0),a.hsides=T(w,!0),D=w.find(".fc-event-title"),D.length&&(a.contentTop=D[0].offsetTop));for(r=0;r<E;r++)a=e[r],(w=a.element)&&(w[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",C=Math.max(0,a.outerHeight-a.vsides),w[0].style.height=C+"px",o=a.event,a.contentTop!==t&&C-a.contentTop<10&&(w.find("div.fc-event-time").text(rt(o.start,m("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),y("eventAfterRender",o,o,w))}function l(t,e){var n="<",r=t.url,a=B(t,m),o=["fc-event","fc-event-vert"];return w(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+P(t.url)+"'":"div",n+=" class='"+o.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+P(at(t.start,t.end,m("timeFormat")))+"</div><div class='fc-event-title'>"+P(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&b(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function u(t,e,n){var r=e.find("div.fc-event-time");w(t)&&h(t,e,r),n.isEnd&&b(t)&&g(t,e,r),E(t,e)}function d(t,e,n){function r(){c||(e.width(a).height("").draggable("option","grid",null),c=!0)}var a,o,i,l=n.isStart,c=!0,u=R(),d=Y(),h=j(),g=I(),p=z();e.draggable({opacity:m("dragOpacity","month"),revertDuration:m("dragRevertDuration"),start:function(n,p){y("eventDragStart",e,t,n,p),U(t,e),a=e.width(),u.start(function(n,a){if(K(),n){o=!1;var u=_(0,a.col),p=_(0,n.col);i=v(p,u),n.row?l?c&&(e.width(d-10),S(e,h*Math.round((t.end?(t.end-t.start)/Rt:m("defaultEventMinutes"))/g)),e.draggable("option","grid",[d,1]),
c=!1):o=!0:(Q(s(f(t.start),i),s(D(t),i)),r()),o=o||c&&!i}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(u.stop(),K(),y("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),V(t,e);else{var s=0;c||(s=Math.round((e.offset().top-X().offset().top)/h)*g+p-(60*t.start.getHours()+t.start.getMinutes())),Z(this,t,i,s,c,n,a)}}})}function h(t,e,n){function r(){K(),l&&(d?(n.hide(),e.draggable("option","grid",null),Q(s(f(t.start),b),s(D(t),b))):(a(C),n.css("display",""),e.draggable("option","grid",[T,x])))}function a(e){var r,a=c(f(t.start),e);t.end&&(r=c(f(t.end),e)),n.text(at(a,r,m("timeFormat")))}var o,i,l,u,d,h,g,w,b,C,M,E=p.getCoordinateGrid(),S=q(),T=Y(),x=j(),k=I();e.draggable({scroll:!1,grid:[T,x],axis:1==S&&"y",opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(n,r){y("eventDragStart",e,t,n,r),U(t,e),E.build(),o=e.position(),i=E.cell(n.pageX,n.pageY),l=u=!0,d=h=A(i),g=w=0,b=0,C=M=0},drag:function(t,n){var a=E.cell(t.pageX,t.pageY);if(l=!!a){if(d=A(a),(g=Math.round((n.position.left-o.left)/T))!=w){var s=_(0,i.col),c=i.col+g;c=Math.max(0,c),c=Math.min(S-1,c);var f=_(0,c);b=v(f,s)}d||(C=Math.round((n.position.top-o.top)/x)*k)}l==u&&d==h&&g==w&&C==M||(r(),u=l,h=d,w=g,M=C),e.draggable("option","revert",!l)},stop:function(n,a){K(),y("eventDragStop",e,t,n,a),l&&(d||b||C)?Z(this,t,b,d?0:C,d,n,a):(l=!0,d=!1,g=0,b=0,C=0,r(),e.css("filter",""),e.css(o),V(t,e))}})}function g(t,e,n){var r,a,o=j(),i=I();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,U(t,e),y("eventResizeStart",this,t,n,o)},resize:function(s,l){(r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o))!=a&&(n.text(at(t.start,r||t.end?c(C(t),i*r):null,m("timeFormat"))),a=r)},stop:function(n,a){y("eventResizeStop",this,t,n,a),r?G(this,t,0,i*r,n,a):V(t,e)}})}var p=this;p.renderEvents=e,p.clearEvents=n,p.slotSegHtml=l,dt.call(p);var m=p.opt,y=p.trigger,w=p.isEventDraggable,b=p.isEventResizable,C=p.eventEnd,E=p.eventElementHandlers,x=p.setHeight,k=p.getDaySegmentContainer,H=p.getSlotSegmentContainer,R=p.getHoverListener,N=p.getMaxMinute,z=p.getMinMinute,W=p.timePosition,A=p.getIsCellAllDay,O=p.colContentLeft,L=p.colContentRight,_=p.cellToDate,q=p.getColCnt,Y=p.getColWidth,j=p.getSnapHeight,I=p.getSnapMinutes,X=p.getSlotContainer,J=p.reportEventElement,V=p.showEvents,U=p.hideEvents,Z=p.eventDrop,G=p.eventResize,Q=p.renderDayOverlay,K=p.clearOverlays,tt=p.renderDayEvents,nt=p.calendar,rt=nt.formatDate,at=nt.formatDates;p.draggableDayEvent=d}function et(t){var e,n=nt(t),r=n[0];if(rt(n),r){for(e=0;e<r.length;e++)at(r[e]);for(e=0;e<r.length;e++)ot(r[e],0,0)}return it(n)}function nt(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&st(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function rt(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for(a=n[r],a.forwardSegs=[],o=e+1;o<t.length;o++)st(a,t[o],a.forwardSegs)}function at(e){var n,r,a=e.forwardSegs,o=0;if(e.forwardPressure===t){for(n=0;n<a.length;n++)r=a[n],at(r),o=Math.max(o,1+r.forwardPressure);e.forwardPressure=o}}function ot(e,n,r){var a,o=e.forwardSegs;if(e.forwardCoord===t)for(o.length?(o.sort(ct),ot(o[0],n+1,r),e.forwardCoord=o[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(n+1),a=0;a<o.length;a++)ot(o[a],0,e.forwardCoord)}function it(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}function st(t,e,n){n=n||[];for(var r=0;r<e.length;r++)lt(t,e[r])&&n.push(e[r]);return n}function lt(t,e){return t.end>e.start&&t.start<e.end}function ct(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ut(t,e)}function ut(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ft(e,n,r){function a(t,e){var n=J[t];return $.isPlainObject(n)?_(n,e||r):n}function o(t,e){return n.trigger.apply(n,[t,e||L].concat(Array.prototype.slice.call(arguments,2),[L]))}function i(t){var e=t.source||{};return I(t.startEditable,e.startEditable,a("eventStartEditable"),t.editable,e.editable,a("editable"))&&!a("disableDragging")}function l(t){var e=t.source||{};return I(t.durationEditable,e.durationEditable,a("eventDurationEditable"),t.editable,e.editable,a("editable"))&&!a("disableResizing")}function u(t){B={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],B[n._id]?B[n._id].push(n):B[n._id]=[n]}function d(){B={},j={},X=[]}function h(t){return t.end?f(t.end):P(t)}function g(t,e){X.push({event:t,element:e}),j[t._id]?j[t._id].push(e):j[t._id]=[e]}function p(){$.each(X,function(t,e){L.trigger("eventDestroy",e.event,e.event,e.element)})}function m(t,e){e.click(function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return o("eventClick",this,t,n)}).hover(function(e){o("eventMouseover",this,t,e)},function(e){o("eventMouseout",this,t,e)})}function y(t,e){b(t,e,"show")}function w(t,e){b(t,e,"hide")}function b(t,e,n){var r,a=j[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function D(t,e,n,r,a,i,s){var l=e.allDay,c=e._id;M(B[c],n,r,a),o("eventDrop",t,e,n,r,a,function(){M(B[c],-n,-r,l),Y(c)},i,s),Y(c)}function C(t,e,n,r,a,i){var s=e._id;E(B[s],n,r),o("eventResize",t,e,n,r,function(){E(B[s],-n,-r),Y(s)},a,i),Y(s)}function M(e,n,r,a){r=r||0;for(var o,i=e.length,l=0;l<i;l++)o=e[l],a!==t&&(o.allDay=a),c(s(o.start,n,!0),r),o.end&&(o.end=c(s(o.end,n,!0),r)),q(o,J)}function E(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)r=t[o],r.end=c(s(h(r),e,!0),n),q(r,J)}function S(t){return"object"==typeof t&&(t=t.getDay()),Z[t]}function T(){return V}function x(t,e,n){for(e=e||1;Z[(t.getDay()+(n?e:0)+7)%7];)s(t,e)}function k(){return R(F(H.apply(null,arguments)))}function H(t,e){var n=L.getColCnt(),r=K?-1:1,a=K?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function F(t){var e=L.visStart.getDay();return t+=G[e],7*Math.floor(t/V)+Q[(t%V+V)%V]-e}function R(t){var e=f(L.visStart);return s(e,t),e}function N(t){return A(W(z(t)))}function z(t){return v(t,L.visStart)}function W(t){var e=L.visStart.getDay();return t+=e,Math.floor(t/7)*V+G[(t%7+7)%7]-G[e]}function A(t){var e=L.getColCnt(),n=K?-1:1,r=K?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}function O(t,e){for(var n=L.getRowCnt(),r=L.getColCnt(),a=[],o=z(t),i=z(e),s=W(o),l=W(i)-1,c=0;c<n;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(d<=v){var h=A(d),g=A(v),p=[h.col,g.col].sort(),m=F(d)==o,y=F(v)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a}var L=this;L.element=e,L.calendar=n,L.name=r,L.opt=a,L.trigger=o,L.isEventDraggable=i,L.isEventResizable=l,L.setEventData=u,L.clearEventData=d,L.eventEnd=h,L.reportEventElement=g,L.triggerEventDestroy=p,L.eventElementHandlers=m,L.showEvents=y,L.hideEvents=w,L.eventDrop=D,L.eventResize=C;var P=L.defaultEventEnd,q=n.normalizeEvent,Y=n.reportEventChange,B={},j={},X=[],J=n.options;L.isHiddenDay=S,L.skipHiddenDays=x,L.getCellsPerWeek=T,L.dateToCell=N,L.dateToDayOffset=z,L.dayOffsetToCellOffset=W,L.cellOffsetToCell=A,L.cellToDate=k,L.cellToCellOffset=H,L.cellOffsetToDayOffset=F,L.dayOffsetToDate=R,L.rangeToSegments=O;var V,U=a("hiddenDays")||[],Z=[],G=[],Q=[],K=a("isRTL");!function(){!1===a("weekends")&&U.push(0,6);for(var t=0,e=0;t<7;t++)G[t]=e,Z[t]=-1!=$.inArray(t,U),Z[t]||(Q[e]=t,e++);if(!(V=e))throw"invalid hiddenDays"}()}function dt(){function t(t,e){var r=n(t,!1,!0);ht(r,function(t,e){R(t.event,e)}),y(r,e),ht(r,function(t,e){x("eventAfterRender",t.event,t.event,e)})}function e(t,e,r){var a=n([t],!0,!1),o=[];return ht(a,function(t,n){t.row===e&&n.css("top",r),o.push(n[0])}),o}function n(t,e,n){var a,s,l=U(),f=e?$("<div/>"):l,d=r(t);return o(d),a=i(d),f[0].innerHTML=a,s=f.children(),e&&l.append(s),c(d,s),ht(d,function(t,e){t.hsides=T(e,!0)}),ht(d,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),ht(d,function(t,e){t.outerHeight=e.outerHeight(!0)}),u(d,n),d}function r(t){for(var e=[],n=0;n<t.length;n++){var r=a(t[n]);e.push.apply(e,r)}return e}function a(t){for(var e=t.start,n=D(t),r=et(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function o(t){for(var e=S("isRTL"),n=0;n<t.length;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?J:I,o=(e?r.isStart:r.isEnd)?V:X,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function i(t){for(var e="",n=0;n<t.length;n++)e+=l(t[n]);return e}function l(t){var e="",n=S("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];k(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=B(r,S);return e+=a?"<a href='"+P(a)+"'":"<div",e+=" class='"+o.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+P(Z(r.start,r.end,S("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+P(r.title||"")+"</span></div>",t.isEnd&&H(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+="</"+(a?"a":"div")+">"}function c(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.event,o=e.eq(n),i=x("eventRender",a,a,o);!1===i?o.remove():(i&&!0!==i&&(i=$(i).css({position:"absolute",left:r.left}),o.replaceWith(i),o=i),r.element=o)}}function u(t,e){var n=d(t),r=m(),a=[];if(e)for(var o=0;o<r.length;o++)r[o].height(n[o]);for(var o=0;o<r.length;o++)a.push(r[o].position().top);ht(t,function(t,e){e.css("top",a[t.row]+t.top)})}function d(t){for(var e=_(),n=Y(),r=[],a=h(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=O(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(O(s))}return r}function h(t){var e,n,r,a=_(),o=[];for(e=0;e<t.length;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=g(o[r]||[]);return o}function g(t){for(var e=[],n=p(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function p(t){t.sort(gt);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&vt(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function m(){var t,e=_(),n=[];for(t=0;t<e;t++)n[t]=j(t).find("div.fc-day-content > div");return n}function y(t,e){var n=U();ht(t,function(t,n,r){var a=t.event;a._id===e?w(a,n,t):n[0]._fci=r}),M(n,t,w)}function w(t,e,n){k(t)&&E.draggableDayEvent(t,e,n),n.isEnd&&H(t)&&E.resizableDayEvent(t,e,n),N(t,e)}function b(t,e){var n,r=tt();e.draggable({delay:50,opacity:S("dragOpacity"),revertDuration:S("dragRevertDuration"),start:function(a,o){x("eventDragStart",e,t,a,o),W(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),Q(),r){var l=nt(a),c=nt(r);n=v(c,l),G(s(f(t.start),n),s(D(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),Q(),x("eventDragStop",e,t,a,o),n?A(this,t,n,0,t.allDay,a,o):(e.css("filter",""),z(t,e))}})}function C(t,n,r){var a=S("isRTL"),o=a?"w":"e",i=n.find(".ui-resizable-"+o),l=!1;q(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),i.mousedown(function(a){function i(e){x("eventResizeStop",this,t,e),$("body").css("cursor",""),f.stop(),Q(),c&&L(this,t,c,0,e),setTimeout(function(){l=!1},0)}if(1==a.which){l=!0;var c,u,f=tt(),d=(_(),Y(),n.css("top")),v=$.extend({},t),h=it(ot(t.start));K(),$("body").css("cursor",o+"-resize").one("mouseup",i),x("eventResizeStart",this,t,a),f.start(function(n,a){if(n){var i=rt(a),l=rt(n);if(l=Math.max(l,h),c=at(l)-at(i)){v.end=s(F(t),c,!0);var f=u;u=e(v,r.row,d),u=$(u),u.find("*").css("cursor",o+"-resize"),f&&f.remove(),W(t)}else u&&(z(t),u.remove(),u=null);Q(),G(t.start,s(D(t),c))}},a)}})}var E=this;E.renderDayEvents=t,E.draggableDayEvent=b,E.resizableDayEvent=C;var S=E.opt,x=E.trigger,k=E.isEventDraggable,H=E.isEventResizable,F=E.eventEnd,R=E.reportEventElement,N=E.eventElementHandlers,z=E.showEvents,W=E.hideEvents,A=E.eventDrop,L=E.eventResize,_=E.getRowCnt,Y=E.getColCnt,j=(E.getColWidth,E.allDayRow),I=E.colLeft,X=E.colRight,J=E.colContentLeft,V=E.colContentRight,U=(E.dateToCell,E.getDaySegmentContainer),Z=E.calendar.formatDates,G=E.renderDayOverlay,Q=E.clearOverlays,K=E.clearSelection,tt=E.getHoverListener,et=E.rangeToSegments,nt=E.cellToDate,rt=E.cellToCellOffset,at=E.cellOffsetToDayOffset,ot=E.dateToDayOffset,it=E.dayOffsetToCellOffset}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function ht(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function gt(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function pt(){function t(t,r,a){e(),r||(r=s(t,a)),l(t,r,a),n(t,r,a)}function e(t){u&&(u=!1,c(),i("unselect",null,t))}function n(t,e,n,r){u=!0,i("select",null,t,e,n,r)}function r(t){var r=a.cellToDate,i=a.getIsCellAllDay,s=a.getHoverListener(),u=a.reportDayClick;if(1==t.which&&o("selectable")){e(t);var f;s.start(function(t,e){c(),t&&i(t)?(f=[r(e),r(t)].sort(A),l(f[0],f[1],!0)):f=null},t),$(document).one("mouseup",function(t){s.stop(),f&&(+f[0]==+f[1]&&u(f[0],!0,t),n(f[0],f[1],!0,t))})}}var a=this;a.select=t,a.unselect=e,a.reportSelection=n,a.daySelectionMousedown=r;var o=a.opt,i=a.trigger,s=a.defaultSelectionEnd,l=a.renderSelection,c=a.clearSelection,u=!1;o("selectable")&&o("unselectAuto")&&$(document).mousedown(function(t){var n=o("unselectCancel");n&&$(t.target).parents(n).length||e(t)})}function mt(){function t(t,e){var n=a.shift();return n||(n=$("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=e[0]&&n.appendTo(e),r.push(n.css(t).show()),n}function e(){for(var t;t=r.shift();)a.push(t.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=e;var r=[],a=[]}function yt(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;a<o;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<i;a++)if(t>=n[a][0]&&t<n[a][1]){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function wt(t){function e(e){bt(e);var n=t.cell(e.pageX,e.pageY);(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))&&(n?(a||(a=n),r(n,a,n.row-a.row,n.col-a.col)):r(n,a),o=n)}var n,r,a,o,i=this;i.start=function(i,s,l){r=i,a=o=null,t.build(),e(s),n=l||"mousemove",$(document).bind(n,e)},i.stop=function(){return $(document).unbind(n,e),o}}function bt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function Dt(e){function n(t){return a[t]=a[t]||e(t)}var r=this,a={},o={},i={};r.left=function(e){return o[e]=o[e]===t?n(e).position().left:o[e]},r.right=function(e){return i[e]=i[e]===t?r.left(e)+n(e).width():i[e]},r.clear=function(){a={},o={},i={}}}var Ct={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Mt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Et=$.fullCalendar={version:"1.6.4"},St=Et.views={};$.fn.fullCalendar=function(e){if("string"==typeof e){var r,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=$.data(this,"fullCalendar");if(n&&$.isFunction(n[e])){var o=n[e].apply(n,a);r===t&&(r=o),"destroy"==e&&$.removeData(this,"fullCalendar")}}),r!==t?r:this}e=e||{};var o=e.eventSources||[];return delete e.eventSources,e.events&&(o.push(e.events),delete e.events),e=$.extend(!0,{},Ct,e.isRTL||e.isRTL===t&&Ct.isRTL?Mt:{},e),this.each(function(t,r){var a=$(r),i=new n(a,e,o);a.data("fullCalendar",i),i.render()}),this},Et.sourceNormalizers=[],Et.sourceFetchers=[];var Tt={dataType:"json",cache:!1},xt=1;Et.addDays=s,Et.cloneDate=f,Et.parseDate=g,Et.parseISO8601=p,Et.parseTime=m,Et.formatDate=y,Et.formatDates=w;var kt=["sun","mon","tue","wed","thu","fri","sat"],Ht=864e5,Ft=36e5,Rt=6e4,Nt={s:function(t){return t.getSeconds()},ss:function(t){return L(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return L(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return L(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return L(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return L(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return L(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return y(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return b(t)}};Et.dateFormatters=Nt,Et.applyAll=j,St.month=X,St.basicWeek=J,St.basicDay=V,e({weekMode:"fixed"}),St.agendaWeek=G,St.agendaDay=Q,e({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);