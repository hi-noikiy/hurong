define(function(require){function e(e,t,i){var a=e||"";if(a)return u.msg(a.msg),t&&u.UnMsg(t.msg),u.reg(a.msgType,function(e){i&&i(e)}),a}function t(e,t){(document.getElementById(e)||document.getElementById("view_"+e)).innerHTML=o("tmp_"+e,t)}function i(e){}function a(e){var a=e.payload,r=[],o=[],n=[],c=[0,0],p=0,u=0;void 0!=a.asks.price&&null!=a.asks.price&&(u=a.asks.price.length),void 0!=a.bids.price&&null!=a.bids.price&&(p=a.bids.price.length);try{for(var m=0,_=Math.max(p,u);m<_;m++){c[0]=d.Add(c[0],void 0==a.asks.amount?0:a.asks.amount[m]),c[1]=d.Add(c[1],void 0==a.bids.amount?0:a.bids.amount[m]);try{a.asks.price[m]&&r.push([void 0==a.asks.price?0:a.asks.price[m],void 0==a.asks.amount?0:a.asks.amount[m],c[0]])}catch(e){}try{a.bids.price[m]&&o.push([void 0==a.bids.price?0:a.bids.price[m],void 0==a.bids.amount?0:a.bids.amount[m],c[1]])}catch(e){}}}catch(e){}var v=new Date,g=v.toLocaleDateString(),h="";try{for(var k=0,f=a.trades.time.length;k<f;k++)a.trades.time[k]&&(v.setTime(1e3*a.trades.time[k]),h=v.toLocaleDateString(),g==h&&n.push([a.trades.time[k],a.trades.price[k],a.trades.amount[k],a.trades.direction[k]]))}catch(e){}l[0]=a.priceOpen,l[1]=a.priceHigh,l[2]=a.priceLow,l[3]=a.priceLast,l[4]=a.priceNew,l[5]=a.totalAmount,l[6]=((a.priceNew-e.payload.yestdayPriceLast)/e.payload.yestdayPriceLast*100).toFixed(3),s&&(s==a.priceNew?l[7]=l[7]:s>a.priceNew?l[7]="font_down":l[7]="font_up"),s=a.priceNew,t("depth_ask",r),t("depth_bid",o),t("trades",n),t("overview",l),t("new_price",l),i(l[4])}var r,s,o=require("./module_tmpl"),n=(require("./module_socket_io"),require("./module_connect")),c=(require("./module_number"),require("./module_socket_api")),d=require("./module_accurate"),p=$(document),u=n($_ws_hq_url),m=c(1).marketDetail0(SYMBOL);r=e(m,"",function(e){p.trigger("__MarketData"),a(e)}),$("#depth_select").on("click","span",function(){var t=$(this),i=t.data("option");m=c(1)["marketDetail"+i](SYMBOL),r=e(m,r,function(e){a(e)}),t.addClass("cur").siblings("span").removeClass("cur")});var l=[]});