!function(t){BitRange=function(n){function e(t,n){for(var e=t,a=0;a<n-1;a++)e+=t;return $(e)}function a(){R=e(R,x),M.paths.append(R)}function i(){var t=100/m,n=0;b=e(b,m+1),b.each(function(e,a){$(a).css("left",n+"%").attr("data-point-ratio",n),n+=t}),M.points.append(b)}function o(t,n){M.ratio=t.pageX?r(t.pageX):t,(M.is(":focus")||M.hasClass("click"))&&C.rangeMouseup&&M.trigger("__rangeSlide",[n])}function r(t){return s(d((t-_._left)/_._width*100))}function s(t){return t<=0?t=0:t>=100&&(t=100),t}function d(t){var n=(t-0)%w,e=t-n;return parseFloat(w?e.toFixed(5):t.toFixed(5))}function c(t){C._delayMet||(t&&t(),C._Delay=setTimeout(function(){C._delayMet=!1},y),C._delayMet=!0)}function u(){M.handle.css({left:M.ratio+"%"}),M.track.css({width:M.ratio+"%"}),M.attr("data-ratio",M.ratio),b.each(function(t,n){var e=$(n),a=$(n).data("point-ratio");M.ratio>=a?e.addClass("active"):e.removeClass("active")})}function f(t,n){void 0!==t&&(M.ratio=s(d(t))),n&&M.trigger("__rangeSlide"),u()}function l(){M.ratio=0,u()}var p,h,g=n||{},_=$(g.range),v=g.value||{min:0,max:100},w=1*g.step||0,m=1*g.point||0,k=g.slide,y=g.delay||10,C=$(this),x="object"==typeof v.max?v.max.length:1,M=$('<div class="range_wrap" data-ratio="0" tabindex="0"><div class="range_paths_wrap"></div><div class="range_track_wrap"><div class="range_track"></div><div class="range_handle"></div></div><div class="range_points_wrap"></div></div>'),R='<div class="range_path"></div>',b='<div class="range_point"></div>',B=$(document);M.trackWrap=M.find(".range_track_wrap"),M.track=M.find(".range_track"),M.handle=M.find(".range_handle"),M.paths=M.find(".range_paths_wrap"),M.points=M.find(".range_points_wrap"),M.ratio=0,_.length<=0||(!function(){_.append(M),_._width=_.width()||_.parent().width()||_.parent().parent().width(),_._left=_.offset().left,h=_._width-M.handle.width()/2,M.trackWrap.width(h),M.points.width(h),m&&i(),a()}(),B.mousemove(function(t){c(function(){C.rangeMouseup&&o(t)})}),M.mousedown(function(t){M.trigger("focus"),C.rangeMouseup=!0;var n=t.target.getAttribute("data-point-ratio"),e=t.target==M.handle[0];n?(C.pointDown=!0,e?o(1*n,0):o(1*n)):(C.pointDown=!1,e?o(t,0):o(t)),M.addClass("click"),void 0!==document.onselectstart&&(document.onselectstart=new Function("return false"))}),M.hover(function(){M.addClass("hover"),_._left=_.offset().left},function(){M.removeClass("hover")}),B.mouseup(function(){C.rangeMouseup=!1,M.removeClass("click"),void 0!==document.onselectstart&&(document.onselectstart=new Function("return true"))}),M.on("__rangeSlide",function(t){u(),p=M.ratio,t&&k&&k(p,_)}).on("focus",function(){M.addClass("focus")}).on("blur",function(){M.removeClass("focus")}).on("keydown",function(t){switch(t.which){case 37:t.shiftKey?M.ratio-=10:M.ratio--;break;case 39:t.shiftKey?M.ratio+=10:M.ratio++;break;default:return}o(s(M.ratio)),u(),p=M.ratio,k&&k(p,_)}),$(t).on("resize",function(){_._width=_.width(),_._left=_.offset().left,h=_._width-M.handle.width()/2,M.trackWrap.width(h),M.points.width(h)}),this.Range=M,this.Update=f,this.Reset=l)},"function"==typeof define?define(function(){return BitRange}):"undefined"!=typeof exports?module.exports=BitRange:t.BitRange=BitRange}(window);