define(function(require){function e(){R=document[a]?1:0,HRYB.GLOBAL.docHidden=R,$(document).trigger("DoDocHidden")}function i(){var e=this;return e.Close=function(i,t){var o=[];i?Array.prototype.push.apply(o,i):Array.prototype.push.apply(o,e),$.each(o,function(){var e=$(this);e.css({height:"",width:""}),!e.hasClass("close")&&e.addClass("close")}),t&&t("close",e)},e.Open=function(i,t){var o=[];i?Array.prototype.push.apply(o,i):o=e,o.length>1?$.each(o,function(e,i){var t=$(this);t.hasClass("close")&&t.removeClass("close"),i.DragSize&&i.SetSize("",i.DragSize)}):(o.hasClass("close")&&o.removeClass("close"),o.DragSize&&o.SetSize("",o.DragSize)),t&&t("open",e)},e.Toggle=function(i,t,o,n,a){var r,s=i||e,l=void 0!==n?n:"";s.on("click",o,function(){s.hasClass("close")?(t?"height"==t?e.SetSize("",["initial",""],function(e){s.removeClass("close")}):e.SetSize("",["","initial"],function(e){s.removeClass("close")}):s.removeClass("close"),r="show"):(t?"height"==t?s.SetSize("",["initial",l],function(e){s.addClass("close")}):s.SetSize("",[l,"initial"],function(e){s.addClass("close")}):s.addClass("close"),r="close"),a&&a(r)})},e.Drag=function(i,t,o){var n,a,r=[],s=void 0!==t?t:"",l=[800,375],d=[],c=[];e.on("mousedown",".handle",function(i){i.stopImmediatePropagation(),n=$(this),r[0]=i.pageX,r[1]=i.pageY,c=[e.Size[0],e.Size[1]],n.attr("data-active",1).addClass("active"),e.addClass("dragging")}),e.on("mouseup",function(){n&&n.attr("data-active",0).removeClass("active"),e.removeClass("dragging"),!n||1*n.attr("data-active")||("width"==i&&d[0]<=s?(e.Close(),e.DragSize[0]="initial"):e.removeClass("close"),"height"==i&&d[1]<=s?(e.Close(),e.DragSize[1]="initial"):e.removeClass("close"),a&&o&&o(d,e),d=[],a=!1)}),p.on("mousemove",function(t){if(t.stopImmediatePropagation(),r[2]=t.pageX,r[3]=t.pageY,n&&1*n.attr("data-active")){var s=["width"==i?d[0]:"initial","height"==i?d[1]:"initial"];d.length>0&&(e.SetSize("",s),e.DragSize=s),d.length>0&&o&&o(d,e),a=a||!0,d=[r[0]-r[2]+c[0],r[1]-r[3]+c[1]],d[0]=d[0]>l[0]?l[0]:d[0],d[1]=d[1]>l[1]?l[1]:d[1]}}).on("mouseup",function(){n&&n.attr("data-active",0).removeClass("active")})},e.GetMouse=function(){var i=[];e.on("mousedown",function(e){i[0]=e.pageX,i[1]=e.pageY}).on("mousemove",function(e){i[2]=e.pageX,i[3]=e.pageY,i[4]=i[2]-i[0]>0?i[2]-i[0]:0,i[5]=i[3]-i[1]>0?i[3]-i[1]:0}),e.mouseXY=i},e.GetSize=function(i){var t=i||e,o=[];return t.is&&t.outerWidth&&(o=t.is(":hidden")?[0,0]:[t.outerWidth(!0),t.outerHeight(!0)]),o},e.SetSize=function(i,t,o){var n=i||e;"initial"!=t[0]&&n.css("width",t[0]),"initial"!=t[1]&&n.css("height",t[1]),"initial"!=t[2]&&n.css("left",t[2]),"initial"!=t[3]&&n.css("top",t[3]),o&&o(n)},e.Tab=function(i,t,o,n,a){if(void 0!=n&&"number"==typeof n)return e.find(i).eq(1*n).addClass("cur").siblings().removeClass("cur"),e.find(t).eq(1*n).show().siblings(t).hide(),void(o&&o(n));e.on("click",i,function(){var i=$(this),n=i.index();if(!1===(a&&a(e)))return!1;i.addClass("cur").siblings().removeClass("cur"),e.find(t).eq(n).show().siblings(t).hide(),o&&o(n)})},e}function t(e){b=o(),n(e)}function o(){var e=[];for(var i in C)e[i]=S.GetSize(C[i]),C[i].Size=S.GetSize(C[i]);return e}function n(e){var i=b[1][0]-b[6][0],t=b[0][1]-b[2][1]-b[4][1]-b[8][1]-b[13][1]-35,o=b[0][1]-b[2][1]-b[4][1]-(b[10][1]>b[11][1]?b[10][1]:b[11][1]),n=b[0][1]-b[2][1]-b[4][1],a=Math.floor(o-76-(o-126)%42);S.SetSize(C[12],["initial",o-5]),S.SetSize(C[3],[b[1][0],n]),S.SetSize(C[5],["initial",n]),S.SetSize(C[6],["initial",n]),S.SetSize(C[7],["initial",t]),S.SetSize(C[9],["initial",o]),S.SetSize($(".market_body"),["initial",a<=8?20:a]),i>=1130?C[8].addClass("column"):C[8].removeClass("column"),b[1][0]<=1e3?C[1].css("overflow-x","auto"):C[1].css("overflow-x","hidden"),S.LayoutInit&&!e||p.trigger("__SetChart",[[i,t]]),S.LayoutInit=1}var a,r,$=require("jquery"),s=require("./module_this_jack"),l=require("./module_time"),d=require("./module_validator"),c=require("./module_md5"),u=require("./module_dialog"),g=require("./module_tip"),h=(require("./page_l_market"),require("./page_l_trade"),require("./page_l_chart")),m=(require("./page_l_notice"),require("./module_oauth")),f=require("./module_coin"),v=require("./module_appseting"),_=window.UID&&document.getElementById("balance")?require("./module_balance"):"",p=$(document),S=$(window),C=[S,$("body"),$("#doc_head"),$("#doc_body"),$("#doc_foot"),$("#main"),$("#bar"),$("#chart"),$("#order"),$("#depth"),$("#trade"),$("#overview"),$("#market_info"),$("#copyright")],b=[],w=$.Deferred(),R=0;HRYB.GLOBAL={},$(".symbol").html(CURRENT_SYMBOL.split("_")[0]).parent().attr("href",HRY.host+"/#/user/loan").attr("target","_blank").css("color","#707070"),$(".CURRENCY_STR").html(CURRENCY_STR).parent().attr("href",HRY.host+"/#/user/loan").attr("target","_blank").css("color","#707070"),$(".CURRENCY_SYMBOL").html(CURRENCY_SYMBOL),void 0!==document.hidden?(a="hidden",r="visibilitychange"):void 0!==document.mozHidden?(a="mozHidden",r="mozvisibilitychange"):void 0!==document.msHidden?(a="msHidden",r="msvisibilitychange"):void 0!==document.webkitHidden&&(a="webkitHidden",r="webkitvisibilitychange"),void 0===document.addEventListener&&void 0===document[a]||document.addEventListener(r,e,!1),HRYB.UTT=l,AR=C,function(){function e(e,i){window.localStorage.clear(),$(e).on("click","span",function(){var e=$(this),t=e.data("act"),o=e.data("val");e.addClass("cur").siblings().removeClass("cur"),i&&i([t,o])})}m.GetOauth(),f.GetCoinList(),v.GetAppConfigData(),s(i,S),s(i,C[8]),s(i,C[6]),s(i,C[10]);var o=$("#loading");new u({dialog:"#login_dialog"},function(e,i){UID||"close"!=i||S.Close([C[10]],function(){S.trigger("__RESIZE",["","",1])})}),new u({dialog:"#two_factor_dialog"},function(){});C[8].Drag("height","80",function(){S.trigger("__RESIZE",["",1,2])}),C[10].Toggle("","height",".panel_trigger","",function(e){UID,"close"==e?C[8].Close("",function(){S.trigger("__RESIZE",["","",3])}):C[8].Open("",function(){S.trigger("__RESIZE",["","",4])}),S.trigger("__RESIZE",[150,5])}),C[10].Tab(".tabs li",".panel",function(e){UID,S.Open([C[8],C[10]],function(){S.trigger("__RESIZE",["",1,6])}),p.trigger("__OrderType",e)}),C[8].Tab(".tabs li",".order_col",function(e){e?C[8].addClass("current"):C[8].removeClass("current")},"",function(e){return!e.hasClass("column")}),C[10].is(":visible")&&C[11].css("padding-bottom","30px");var n=$("#balance");S.Toggle(n,"",".bar","",function(e){console.log(e)}),n.blur(function(){n.addClass("close")}),S.on("__RESIZE",function(e,i,o,n){var a=i||0;S.SetChart=0,a?setTimeout(function(){t(o)},a):t(o)}).on("load",function(){S.trigger("__RESIZE",["","",7])}).on("resize",function(){if(S.trigger("__RESIZE",["","",8]),S.SetChart)return!1}),p.on("__TradeTab",function(e,i){C[10].Tab(".tabs li",".panel","",i)}).on("__SetChart",function(e,i){S.SetChart=1,a.rd&&a.rd({w:i[0],h:i[1],fs:1})}).on("__MarketData",function(){o.is(":visible")&&(o.addClass("out"),S.trigger("__RESIZE",["","",9]),setTimeout(function(){o.remove()},750))}),_&&$.when(_(w,function(){$("#balance").data("refresh")||HRYB.AJAX.GetBalance.Stop()})).done(function(){HRYB.AJAX.GetBalance.Play(),$(document).on("DoDocHidden",function(){R?HRYB.AJAX.GetBalance.Stop():HRYB.AJAX.GetBalance.Play()})});var a=h("chart",{border:0,currentTools:"CrossLine",symlist:[SYMBOL],symbol:0,vIndicator:"MACD",timeShare:1,schemes:"lightning",drawRange:.75,level:4,version:"151201",url:$_ws_hq_url});window._Chart=a,e("#period",function(e){window.localStorage.clear(),e&&a[e[0]]&&a[e[0]](e[1])}),e("#indicator",function(e){e&&a[e[0]]&&a[e[0]](e[1])}),$("#chart_zoom").click(function(){var e=$(this);e.hasClass("zoom")?(S.Open([C[6],C[8]],function(){S.trigger("__RESIZE",["",1,10])}),e.removeClass("zoom")):(S.Close([C[6],C[8]],function(){S.trigger("__RESIZE",["",1,11])}),e.addClass("zoom"))}),d({forms:$(".form_login"),tip:".form_tip",changes:function(e){var i=$(e),t=$(e).parents(".group");i.attr("data-write")&&PC.RapidWrite({input:i}),t.find(".v_info").hide(),t.find(".group_help").show()},beforeSubmit:function(e){var i=e.find(":submit");e.attr("action",HRY.host+HRY.modules.oauth+"loginService.do"),BtnSubmit=i.text(),i.prop("disabled",!0).text(Lang.L("Loading"))},postData:function(e){var i=[];return $.each(e,function(e,t){"password"!=t.name?i.push(t):i.push({name:"password",value:c.hbmd5(t.value)})}),i},callback:function(e,i){e=JSON.parse(e);var t=$(i).find(".form_tip");if(i.find(":submit").prop("disabled",!1).text(BtnSubmit),e.success)window.location.reload();else{var o=($("#by_phone"),$("#vcode_p")),n=$("#v_code");15==e.code&&o.show(),n.attr("src",HRY.host+HRY.modules.oauth+"/validcode/registcode.jpg?r="+Math.random()),t.html(e.msg).addClass("v_error")}},ajaxError:function(e){var i=e.find(".form_tip"),t=e.find(":submit");i.html(window.Texts&&Texts.NetworkError).addClass("v_error"),t.prop("disabled",!1).text(BtnSubmit)}}),$("#v_code").click(function(){$(this)[0].src=HRY.host+HRY.modules.oauth+"/validcode/registcode.jpg"+Math.random()}),g({tip:".bind_tips"},function(e,i){})}()});