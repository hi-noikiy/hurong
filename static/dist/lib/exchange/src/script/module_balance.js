define(function(require,exports,module){var $,n,t,_,a,e,c,l;$=require("jquery"),n=require("./module_ajax"),t=require("./module_hb_extend"),l=require("./module_number"),require("./module_oauth"),$("input[name='coin_type']").val(),_={},c={},HRYB.BALANCE=_,c.dom=$(document),c.convert_total_cny=$(".convert_total_cny"),c.convert_total_usd=$(".convert_total_usd"),c.convert_total_btc=$(".convert_total_btc"),c.convert_net_cny=$(".convert_net_cny"),c.convert_net_usd=$(".convert_net_usd"),c.convert_net_btc=$(".convert_net_btc"),c.cny_available=$(".cny_cny_available"),c.cny_btc_available=$(".cny_btc_available"),c.cny_ltc_available=$(".cny_ltc_available"),c.cny_dsc_available=$(".cny_dsc_available"),c.loan_cny_cny=$(".loan_cny_cny"),c.loan_cny_btc=$(".loan_cny_btc"),c.sellRate=$(".sellRate"),c.buyRate=$(".buyRate"),c.minimum=$(".minimum"),c.minprice=$(".minprice"),c.cny_frozen=$(".cny_cny_frozen"),c.cny_btc_frozen=$(".cny_btc_frozen"),c.cny_ltc_frozen=$(".cny_ltc_frozen"),c.cny_loan=$(".cny_cny_loan"),c.cny_btc_loan=$(".cny_btc_loan"),c.cny_ltc_loan=$(".cny_ltc_loan"),c.cny_risk_rate=$(".cny_risk_rate"),c.cny_total=$(".cny_total"),c.cny_net_asset=$(".cny_net_asset"),c.usd_available=$(".usd_usd_available"),c.usd_btc_available=$(".usd_btc_available"),c.usd_frozen=$(".usd_usd_frozen"),c.usd_btc_frozen=$(".usd_btc_frozen"),c.usd_loan=$(".usd_usd_loan"),c.usd_btc_loan=$(".usd_btc_loan"),c.usd_risk_rate=$(".usd_risk_rate"),c.usd_total=$(".usd_total"),c.usd_net_asset=$(".usd_net_asset"),c.fee_rate=$(".fee_rate"),c.head_balance=$("#head_balance"),c.cny_c_a_panel=$("cny_cny_available_panel"),a=function(a,o){function s(n){try{n=JSON.parse(JSON.parse(n).obj),c.buyRate.attr("data-tips","当前买入费率为"+n.buyFeeRate+"%"),c.sellRate.attr("data-tips","当前卖出费率为"+n.sellFeeRate+"%"),$(".sellrate").val(n.sellFeeRate),$(".buyRate").val(n.buyFeeRate),$(".keepDecimalForCoin").val(n.keepDecimalForCoin),$(".keepDecimalForCurrency").val(n.keepDecimalForCurrency),c.minimum.attr("data-min",n.sellMinCoin),c.minimum.attr("data-max",n.oneTimeOrderNum),c.minprice.attr("data-min",n.buyMinMoney),_.cny_available=1*n.rmb,_.cny_cny_available=1*n.rmb,_.cny_btc_available=1*n.coinHotMoney,_.cny_dsc_available=1*n.coinHotMoney,_.cny_loan=1*n.rMBAccountNetAsse,_.loan_cny_cny=1*n.rMBAccountNetAsse,_.loan_cny_btc=1*n.coinAccountNetAsse,_.cny_btc_loan=1*n.coinAccountNetAsse,_.cny_ltc_loan=1*n.coinAccountNetAsse,c.dom.trigger("__GetBalance",n.ext),r(),o&&o()}catch(n){}}function r(){$.each(c,function(n,t){var a=t.length,e=n.indexOf("btc")>0||n.indexOf("ltc")>0?l(_[n],4):l(_[n],3);1===a?"0"==t.attr("data-flaunted")?t.html("---").attr("data-flaunt",e):t.html(e).attr("data-flaunt",e):a>1&&t.each(function(){var n=$(this);"0"==n.attr("data-flaunted")?n.html("---").attr("data-flaunt",e):n.html(e).attr("data-flaunt",e)})}),_.cny_risk_rate?($(".cny_loan_rate_yes").show(),$(".cny_loan_rate_no").hide()):($(".cny_loan_rate_yes").hide(),$(".cny_loan_rate_no").show()),_.usd_risk_rate?($(".usd_loan_rate_yes").show(),$(".usd_loan_rate_no").hide()):($(".usd_loan_rate_yes").hide(),$(".usd_loan_rate_no").show()),a.resolve(),_.cny_btc_burst>0||_.cny_ltc_burst>0?_.cny_btc_burst>0?$(".cny_loan_burst_price_btc").find(".price").html(_.cny_btc_burst).end().show().siblings(".cny_loan_burst").hide():_.cny_ltc_burst>0&&$(".cny_loan_burst_price_ltc").find(".price").html(_.cny_ltc_burst).end().show().siblings(".cny_loan_burst").hide():$(".cny_loan_burst_price_no").show().siblings(".cny_loan_burst").hide(),_.usd_btc_burst>0?$(".usd_loan_burst_price_btc").find(".price").html(_.usd_btc_burst).end().show().siblings(".usd_loan_burst").hide():$(".usd_loan_burst_price_no").show().siblings(".usd_loan_burst").hide()}return e=new n({url:HRY.host+"/user/getAccountInfo",data:{m:"user_balance",coinCode:CURRENT_SYMBOL},refresh:2e3,damp:!0},function(n){"success"==n.code&&s(n.data)}),t({name:"AJAX",value:{GetBalance:e}}),a},module.exports=a});