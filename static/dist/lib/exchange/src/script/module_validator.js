!function(window){var BitValidator=function(options){var _language={error:L("错误"),success:L("校验通过"),undefined:L("未定义"),error_min:L("数值小于"),error_max:L("数值大于"),error_submit:L("表单提交出错"),error_input:L("输入错误"),error_null:L("请输入信息")},_dataType={"*":/[\w\W]+/,n:/^\d+\.?\d*$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,m:/^1[0-9]{10}$/,p:/^[0-9]{5,11}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/,ZEN:/^(?!_)(?!.*?_$)([a-zA-Z0-9_.\u4e00-\u9fa5\s])*$/,NAME:/^(?!_)(?!.*?_$)([·a-zA-Z_.\u4e00-\u9fa5\s])*$/,EN:/^(?!_)(?!.*?_$)([a-zA-Z_\s.])*$/,NEN:/^(?!_\-)(?!.*?_$)([a-zA-Z0-9\s\,\'.])*$/,SPE:/^([^\/\\/:<>!\*\|"\?\$\=])*$/,pwd:/(?!\d+$)[\dA-Za-z\W]/,num_range:function(t){var e=Number($(t).attr("data-min")),a=Number($(t).attr("data-max")),n=$(t).attr("data-msg-error")?$(t).attr("data-msg-error").split(","):[],r=$(t).val();return!!/^\d+\.?\d*$/.test(r)&&(r<e?n[1]?n[1].indexOf("@@")>0?n[1].replace("@@",e):n[1]:_language.error_min+e:!(r>a)||(n[2]?n[2].indexOf("@@")>0?n[2].replace("@@",a):n[2]:_language.error_max+a))},compare:function(t){var e=$(t),a=e.parents("form"),n=e.val(),r=e.data("compare");return n==(/^\./.test(r)?a.find(r).val():a.find('[name="'+r+'"]').val())}},_default={forms:null,beforeSend:null,process:null,beforeValidation:null,beforeSubmit:null,formSubmit:null,callback:null,single:null,changes:null,ignoreHidden:!0,ajaxPost:!0,ajaxError:null,instant:!1,postData:null,tip:"",is_focus:!0,dataType:{}},_class={class_name:{input:{default:"input_text",success:"",error:"input_text_red"},msg:{default:"v_info",success:"v_success",error:"v_error"}}},_option=$.extend(_default,_class,options),_data_type=$.extend(_dataType,_option.dataType,$.ValidatorDataType),_form=$(options.forms),_record=!1,_init={fn_init:function(t){t.attr("validator","true");var e=t.find(":submit");e.prop("disabled")&&!e.data("disabled")&&e.prop("disabled",!1),_option.beforeSend&&_option.beforeSend(t),_option.instant?t.on("change",function(e){_init.fn_find(t)}):t.on("change",function(e){_init.fn_msg(e.target,3),_option.changes&&_option.changes(e.target,t)}),t.submit(function(){return _option.beforeValidation&&_option.beforeValidation($(this)),_init.fn_find($(this))?!1!==(_option.beforeSubmit&&_option.beforeSubmit($(this)))&&(_option.ajaxPost?(_init.fn_ajax($(this)),!1):void 0):(_option.process&&_option.process(),!1)})},fn_find:function(t){var e=[],a=null,n=null,r=null;return t.find("[data-type]").length>0?t.find("[data-type]").each(function(i,_){var o=$(_),s=o.data("must");return e=_init.fn_check(o,_init.fn_value(o,t),o.data("type")),a=o,n=o.data("ignore"),r=o.data("handle"),!!($(a).is(":hidden")&&_option.ignoreHidden&&void 0===r||$(a).attr("disabled")&&!s||$(a).attr("readonly")&&!s)||("empty"===n&&1==e[0]||("ignore"===n||(_option.single&&_option.single([a,e[0]]),1==e[0]&&_init.fn_msg(_,1),2==e[0]&&_init.fn_msg(_,2,e[1]),3==e[0]&&_init.fn_msg(_,3),0!=e[0]?(_record=!1,!1):(e[1]?_init.fn_msg(_,0,e[1]):_init.fn_msg(_,0),void(_record=!0)))))}):_record=!0,_record},fn_value:function(t,e){var a;return t.is(":radio")?(a=e.find(":radio[name='"+t.attr("name")+"']:checked").val(),a=void 0===a?"":a):t.is(":checkbox")?(e.find(":checkbox[name='"+t.attr("name")+"']:checked").each(function(){a+=$(this).val()+","}),a=void 0===a?"":a):a=t.val(),$.trim(a)},fn_data_type:function(type){var _type=type,_reg=/\/.+\//g,_match=/^(.+?)(\d+)-(\d+)$/,_multi_reg=/^(.+?)(,|$|\||\s)(.+?)$/,_multi=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,_rule=null;if(_reg.test(_type))_rule=[0,eval(_type)];else if(_data_type[_type]||!_type.match(_match)||_multi_reg.test(_type)){if(_data_type[_type])_rule="function"==typeof _data_type[_type]?[1,_data_type[_type]]:[2,_data_type[_type]];else if(_multi_reg.test(_type)){var _arr=[[]],_mark=_type.replace(_multi,"").replace(/\s*/g,"").split(""),_item=_type.match(_multi),_m=0;_arr[0].push(_item[0]);for(var _n=0;_n<_mark.length;_n++)"|"==_mark[_n]&&(_m++,_arr[_m]=[]),_arr[_m].push(_item[_n+1]);_rule=[4,_arr]}}else{var _temp=_type.match(_match);_rule=[3,_data_type[_temp[1]],_temp[2],_temp[3]]}if(!_rule)return alert(_type+_language.undefined),!1;if("4"==_rule[0]){var _it,_its,_rules=_rule[1];if(_rules.length>1)for(_it in _rules)for(_its in _rules[_it]){var _items=_rules[_it][_its];_data_type[_items]||_data_type[_items.match(_match)[1]]||(alert("l276 "+_items+_language.undefined),_rule=!1)}}return _rule},fn_check:function(t,e,a){function n(a){var n=[];if(""==$.trim(e))n[0]=1;else{if("0"!=a[0]&&"2"!=a[0]||(a[1].test(e)?n[0]=0:($(t).change(function(){a[1].test($(this).val())&&_init.fn_msg(t,0)}),n[0]=2)),"1"==a[0]){"string"==typeof a[1](t)?($(t).change(function(){a[1](t)&&_init.fn_msg(t,0)}),n=[2,a[1](t)]):a[1](t)?n[0]=0:n[0]=2}"3"==a[0]&&(a[1].test(e)?e.length<Number(a[2])||e.length>Number(a[3])?n[0]=2:n[0]=0:n[0]=2)}return n}var r=t,i=[],_=_init.fn_data_type(r.data("type")),o=null;if(_){if("4"==_[0])for(var s=0;s<_[1].length;s++){for(var l=0;l<_[1][s].length&&(o=_init.fn_data_type(_[1][s][l]),i=n(o),"0"==i[0]);l++);if("0"==i[0])break}else i=n(_);return i}return!1},fn_ajax:function(t){var e,a,n;e=t.attr("action"),n=t.attr("method")||"post",a=_option.postData?_option.postData(t.serializeArray()):t.serializeArray();var r=!0;1==t.attr("data-async")&&(r=!1),$.ajax({url:e,type:n,async:r,data:a,beforeSend:function(){},success:function(e){_option.callback&&_option.callback(e,t)},error:function(){_option.ajaxError&&_option.ajaxError(t),console.log(_language.error_submit)}})},fn_msg:function(t,e,a){var n,r,i,_=$(t).parents("form"),o=_option.tip?_.find(_option.tip):$(t).closest(".group").find("."+_option.class_name.msg.default),s=_option.class_name.msg.success,l=_option.class_name.msg.error,u=_option.class_name.input.success,d=_option.class_name.input.error;switch(n=$(t).data("msg-null")||_language.error_null,r=$(t).data("msg-error")||_language.error_input,i=$(t).data("msg-success")||"",r=/(.),(.)/.test(r)?r.split(",")[0]:r,a&&(r=a),e){case 0:$(t).removeClass(d).addClass(u),o.removeClass(l).addClass(s).html(i);break;case 1:_option.is_focus&&$(t).removeClass(u).addClass(d).focus(),o.removeClass(s).addClass(l).html(n);break;case 2:_option.is_focus&&$(t).removeClass(u).addClass(d).focus(),o.removeClass(s).addClass(l).html(r);break;case 3:$(t).removeClass(d),o.removeClass(l).html("")}}};_form&&_form.length>0&&_form.each(function(){var t=$(this);!t.attr("validator")&&_init.fn_init(t)})};"function"==typeof define?define(function(){return BitValidator}):"undefined"!=typeof exports?module.exports=BitValidator:window.BitValidator=BitValidator}(window);